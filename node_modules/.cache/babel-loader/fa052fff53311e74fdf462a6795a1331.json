{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{createContract}from'./../ethereum/DiplomaStorageContract';import{ButtonGroup,Button}from'react-bootstrap';import{web3}from'./../ethereum/web3';import NavBar from'./../assets/NavBar';export var RenderSchools=/*#__PURE__*/function(_Component){_inherits(RenderSchools,_Component);var _super=_createSuper(RenderSchools);_createClass(RenderSchools,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.getSchools(this.getDiplomaStorageAddress());case 2:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"getDiplomaStorageAddress\",value:function getDiplomaStorageAddress(){return this.props.match.params.address;}},{key:\"getSchools\",value:function(){var _getSchools=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(address){var contract,accounts,schoolCount,i,school;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:contract=createContract(address);_context2.next=3;return web3.eth.getAccounts();case 3:accounts=_context2.sent;this.setState({account:accounts[0]});console.log(accounts);this.setState({contract:contract});console.log(contract);_context2.next=10;return contract.methods.schoolCount().call();case 10:schoolCount=_context2.sent;this.setState({schoolCount:schoolCount});i=1;case 13:if(!(i<=schoolCount)){_context2.next=21;break;}_context2.next=16;return contract.methods.schools(i).call();case 16:school=_context2.sent;this.setState({schools:[].concat(_toConsumableArray(this.state.schools),[school])});case 18:i++;_context2.next=13;break;case 21:case\"end\":return _context2.stop();}}},_callee2,this);}));function getSchools(_x){return _getSchools.apply(this,arguments);}return getSchools;}()}]);function RenderSchools(props){var _this;_classCallCheck(this,RenderSchools);_this=_super.call(this,props);_this.state={schools:{id:0,name:'N/A'}};_this.state={account:'',schoolCount:0,schools:[]};return _this;}_createClass(RenderSchools,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(NavBar,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5 text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-10 mb-4 grid-margin\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card h-100\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-header\"},\"All the schools are here below\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},\"Voici la liste des \\xE9coles enregistr\\xE9s sur la blockchain. \")))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"#\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Name\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},this.state.schools.map(function(school,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,school.id));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.schools.map(function(school,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,school.name));}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(ButtonGroup,{size:\"lg\"},/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:this.onSubmitBack},\"Back\"),/*#__PURE__*/React.createElement(Button,{variant:\"light\",onClick:this.onSubmitReload},\"Refresh\")))));}},{key:\"onSubmitBack\",value:function onSubmitBack(event){event.preventDefault();window.history.back();}},{key:\"onSubmitReload\",value:function onSubmitReload(event){event.preventDefault();window.location.reload();}}]);return RenderSchools;}(Component);export default RenderSchools;","map":{"version":3,"sources":["C:/Users/francesca/Desktop/Code SmartContract/react-boost-test/src/components/RenderSchools.js"],"names":["React","Component","createContract","ButtonGroup","Button","web3","NavBar","RenderSchools","getSchools","getDiplomaStorageAddress","props","match","params","address","contract","eth","getAccounts","accounts","setState","account","console","log","methods","schoolCount","call","i","schools","school","state","id","name","map","key","onSubmitBack","onSubmitReload","event","preventDefault","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\r\nimport { createContract } from './../ethereum/DiplomaStorageContract'\r\nimport { ButtonGroup, Button } from 'react-bootstrap';\r\nimport { web3 } from './../ethereum/web3';\r\nimport NavBar from './../assets/NavBar';\r\n\r\n\r\n\r\n\r\nexport class RenderSchools extends Component {\r\n\r\n    state = {\r\n        schools: {\r\n            id: 0,\r\n            name: 'N/A',\r\n        }\r\n\r\n    }\r\n\r\n  async componentDidMount () {\r\n    await this.getSchools(this.getDiplomaStorageAddress()\r\n    )\r\n  }\r\n  \r\n  getDiplomaStorageAddress () {\r\n    return this.props.match.params.address\r\n  }\r\n\r\n  async getSchools(address) {\r\n    const contract = createContract(address)\r\n    const accounts = await web3.eth.getAccounts()\r\n    this.setState({ account: accounts[0] })\r\n    console.log(accounts)\r\n    \r\n    this.setState({ contract })\r\n    console.log(contract)\r\n\r\n    const schoolCount = await contract.methods.schoolCount().call()\r\n    this.setState({schoolCount})\r\n\r\n    for (var i = 1; i <= schoolCount; i++) {\r\n        const school = await contract.methods.schools(i).call()\r\n        this.setState({\r\n          schools: [...this.state.schools, school]\r\n        })\r\n      }\r\n    \r\n}\r\n\r\nconstructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      account:'',\r\n      schoolCount: 0,\r\n      schools: [],\r\n    }\r\n}\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n          <header>\r\n              <NavBar/>\r\n          </header>\r\n\r\n          <div className=\"container\">\r\n           <div className=\"row mt-5 text-center\">\r\n            <div className=\"col-lg-10 mb-4 grid-margin\">\r\n              <div className=\"card h-100\">\r\n                  <h4 className=\"card-header\">All the schools are here below</h4>\r\n                  <div className=\"card-body\">\r\n                    <p className=\"card-text\">Voici la liste des écoles enregistrés sur la blockchain. </p>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n        </div>    \r\n      </div>\r\n          \r\n            \r\n      <div>\r\n     <table className=\"table\">\r\n      <thead className=\"thead-dark\">\r\n    <tr>\r\n      <th scope=\"col\">#</th>\r\n      <th scope=\"col\">Name</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n    <th scope=\"row\">\r\n          { this.state.schools.map((school, key) => {\r\n            return(\r\n              \r\n              <div key={key}>\r\n                <td>\r\n                  {school.id}\r\n                </td>\r\n              </div>\r\n              \r\n             )\r\n          })}\r\n      </th>\r\n\r\n    <td>\r\n      { this.state.schools.map((school, key) => {\r\n            return(\r\n              \r\n              <div key={key}>\r\n                <td>\r\n                  {school.name}\r\n                </td>\r\n              </div> \r\n              \r\n                 )\r\n        })}\r\n    </td> \r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n\r\n    <div className=\"container\">\r\n          <ButtonGroup size=\"lg\" >\r\n                <Button variant=\"primary\" \r\n                    onClick={this.onSubmitBack}\r\n                    >Back\r\n                </Button>\r\n                <Button variant=\"light\" \r\n                    onClick={this.onSubmitReload}\r\n                    >Refresh\r\n                </Button>\r\n          </ButtonGroup>\r\n    </div> \r\n                  \r\n  </div>  \r\n      \r\n</div>\r\n    );\r\n  }\r\n\r\n  onSubmitBack(event) {\r\n    event.preventDefault();\r\n    window.history.back()\r\n}\r\n\r\nonSubmitReload(event) {\r\n    event.preventDefault();\r\n    window.location.reload()\r\n}\r\n}\r\n\r\nexport default RenderSchools;"]},"metadata":{},"sourceType":"module"}