{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{createContract}from'./../ethereum/DiplomaStorageContract';import{ButtonGroup,Button}from'react-bootstrap';import{web3}from'./../ethereum/web3';import NavBar from'./../assets/NavBar';export var RenderStudents=/*#__PURE__*/function(_Component){_inherits(RenderStudents,_Component);var _super=_createSuper(RenderStudents);_createClass(RenderStudents,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.getStudents(this.getDiplomaStorageAddress());case 2:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"getDiplomaStorageAddress\",value:function getDiplomaStorageAddress(){return this.props.match.params.address;}},{key:\"getStudents\",value:function(){var _getStudents=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(address){var contract,accounts,studentCount,i,student;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:contract=createContract(address);_context2.next=3;return web3.eth.getAccounts();case 3:accounts=_context2.sent;this.setState({account:accounts[0]});console.log(accounts);this.setState({contract:contract});console.log(contract);_context2.next=10;return contract.methods.studentCount().call();case 10:studentCount=_context2.sent;this.setState({studentCount:studentCount});i=1;case 13:if(!(i<=studentCount)){_context2.next=21;break;}_context2.next=16;return contract.methods.students(i).call();case 16:student=_context2.sent;this.setState({students:[].concat(_toConsumableArray(this.state.students),[student])});case 18:i++;_context2.next=13;break;case 21:case\"end\":return _context2.stop();}}},_callee2,this);}));function getStudents(_x){return _getStudents.apply(this,arguments);}return getStudents;}()}]);function RenderStudents(props){var _this;_classCallCheck(this,RenderStudents);_this=_super.call(this,props);_this.state={students:{name:'N/A',idStudent:0,INE:0,fisrtName:'N/A',lastName:'N/A',birth:0}};_this.state={account:'',studentCount:0,students:[]};return _this;}_createClass(RenderStudents,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(NavBar,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5 text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-10 mb-4 grid-margin\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card h-100\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-header\"},\"All the students are here below\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},\"Voici la liste des \\xE9tudinats enregistr\\xE9s sur la blockchain. \")))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"#\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"INE\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"First Name \"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Last Name\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Birthday\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},this.state.students.map(function(student,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,student.id));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.students.map(function(student,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,student.INE));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.students.map(function(student,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,student.firstName));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.students.map(function(student,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,student.lastName));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.students.map(function(student,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,student.birth));}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(ButtonGroup,{size:\"lg\"},/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:this.onSubmitBack},\"Back\"),/*#__PURE__*/React.createElement(Button,{variant:\"light\",onClick:this.onSubmitReload},\"Refresh\")))));}},{key:\"onSubmitBack\",value:function onSubmitBack(event){event.preventDefault();window.history.back();}},{key:\"onSubmitReload\",value:function onSubmitReload(event){event.preventDefault();window.location.reload();}}]);return RenderStudents;}(Component);export default RenderStudents;","map":{"version":3,"sources":["C:/Users/francesca/Desktop/Code SmartContract/react-boost-test/src/components/RenderStudents.js"],"names":["React","Component","createContract","ButtonGroup","Button","web3","NavBar","RenderStudents","getStudents","getDiplomaStorageAddress","props","match","params","address","contract","eth","getAccounts","accounts","setState","account","console","log","methods","studentCount","call","i","students","student","state","name","idStudent","INE","fisrtName","lastName","birth","map","key","id","firstName","onSubmitBack","onSubmitReload","event","preventDefault","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\r\nimport { createContract } from './../ethereum/DiplomaStorageContract'\r\nimport { ButtonGroup, Button } from 'react-bootstrap';\r\nimport { web3 } from './../ethereum/web3';\r\nimport NavBar from './../assets/NavBar';\r\n\r\n\r\n\r\n\r\nexport class RenderStudents extends Component {\r\n\r\n    state = {\r\n        students: {\r\n            name:'N/A',\r\n            idStudent: 0,\r\n            INE: 0,\r\n            fisrtName: 'N/A',\r\n            lastName: 'N/A',\r\n            birth: 0,\r\n        }\r\n\r\n    }\r\n\r\n  async componentDidMount () {\r\n    await this.getStudents(this.getDiplomaStorageAddress()\r\n    )\r\n  }\r\n  \r\n  getDiplomaStorageAddress () {\r\n    return this.props.match.params.address\r\n  }\r\n\r\n  async getStudents(address) {\r\n    const contract = createContract(address)\r\n    const accounts = await web3.eth.getAccounts()\r\n    this.setState({ account: accounts[0] })\r\n    console.log(accounts)\r\n    \r\n    this.setState({ contract })\r\n    console.log(contract)\r\n\r\n    const studentCount = await contract.methods.studentCount().call()\r\n    this.setState({studentCount})\r\n\r\n    for (var i = 1; i <= studentCount; i++) {\r\n        const student = await contract.methods.students(i).call()\r\n        this.setState({\r\n          students: [...this.state.students, student]\r\n        })\r\n      }\r\n    \r\n}\r\n\r\nconstructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      account:'',\r\n      studentCount: 0,\r\n      students: [],\r\n    }\r\n}\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n          <header>\r\n              <NavBar/>\r\n          </header>\r\n\r\n          <div className=\"container\">\r\n           <div className=\"row mt-5 text-center\">\r\n            <div className=\"col-lg-10 mb-4 grid-margin\">\r\n              <div className=\"card h-100\">\r\n                  <h4 className=\"card-header\">All the students are here below</h4>\r\n                  <div className=\"card-body\">\r\n                    <p className=\"card-text\">Voici la liste des étudinats enregistrés sur la blockchain. </p>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n        </div>    \r\n      </div>\r\n          \r\n            \r\n      <div>\r\n     <table className=\"table\">\r\n      <thead className=\"thead-dark\">\r\n    <tr>\r\n      <th scope=\"col\">#</th>\r\n      <th scope=\"col\">INE</th>\r\n      <th scope=\"col\">First Name </th>\r\n      <th scope=\"col\">Last Name</th>\r\n      <th scope=\"col\">Birthday</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n    <th scope=\"row\">\r\n          { this.state.students.map((student, key) => {\r\n            return(\r\n              \r\n              <div key={key}>\r\n                <td>\r\n                  {student.id}\r\n                </td>\r\n              </div>\r\n              \r\n             )\r\n          })}\r\n      </th>\r\n\r\n    <td>\r\n      { this.state.students.map((student, key) => {\r\n            return(\r\n              \r\n              <div key={key}>\r\n                <td>\r\n                  {student.INE}\r\n                </td>\r\n              </div> \r\n              \r\n                 )\r\n        })}\r\n    </td> \r\n\r\n    <td> \r\n      { this.state.students.map((student, key) => {\r\n            return(\r\n              <div key={key}>\r\n                <td>\r\n                  {student.firstName}\r\n              </td>\r\n            </div> \r\n              \r\n                 )\r\n        })}\r\n    </td>  \r\n      \r\n    <td> \r\n      { this.state.students.map((student, key) => {\r\n            return(\r\n              <div key={key}>\r\n                <td>\r\n                  {student.lastName}\r\n              </td>\r\n            </div> \r\n              \r\n                 )\r\n        })}\r\n    </td> \r\n      \r\n    <td> \r\n      { this.state.students.map((student, key) => {\r\n            return(\r\n              <div key={key}>\r\n                <td>\r\n                  {student.birth}\r\n              </td>\r\n            </div> \r\n              \r\n                 )\r\n        })}\r\n    </td> \r\n      \r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n\r\n    <div className=\"container\">\r\n          <ButtonGroup size=\"lg\" >\r\n                <Button variant=\"primary\" \r\n                    onClick={this.onSubmitBack}\r\n                    >Back\r\n                </Button>\r\n                <Button variant=\"light\" \r\n                    onClick={this.onSubmitReload}\r\n                    >Refresh\r\n                </Button>\r\n          </ButtonGroup>\r\n    </div> \r\n                  \r\n  </div>  \r\n      \r\n</div>\r\n    );\r\n  }\r\n\r\n  onSubmitBack(event) {\r\n    event.preventDefault();\r\n    window.history.back()\r\n}\r\n\r\nonSubmitReload(event) {\r\n    event.preventDefault();\r\n    window.location.reload()\r\n}\r\n}\r\n\r\nexport default RenderStudents;"]},"metadata":{},"sourceType":"module"}