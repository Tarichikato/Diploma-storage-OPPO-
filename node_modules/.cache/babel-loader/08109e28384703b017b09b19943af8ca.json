{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\src\\\\components\\\\CheckDiplomas.js\";\nimport React, { Component } from 'react';\nimport { createContract } from './../ethereum/DiplomaStorageContract';\nimport { Button, ButtonGroup, Form, Spinner, Modal, ButtonToolbar } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\nimport { ModalCheckDiploma } from './../assets/PopupCDiploma';\nexport class CheckDiplomas extends Component {\n  async componentDidMount() {\n    await this.getDiplomas(this.getDiplomaStorageAddress());\n  }\n\n  getDiplomaStorageAddress() {\n    return this.props.match.params.address;\n  }\n\n  async getDiplomas(address) {\n    const contract = createContract(address);\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(accounts);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const diplomaCount = await contract.methods.diplomaCount().call();\n    this.setState({\n      diplomaCount\n    });\n    const studentCount = await contract.methods.studentCount().call();\n    this.setState({\n      studentCount\n    });\n    const degreeCount = await contract.methods.degreeCount().call();\n    this.setState({\n      degreeCount\n    });\n    const schoolCount = await contract.methods.schoolCount().call();\n    this.setState([schoolCount]);\n\n    for (var i = 1; i <= studentCount; i++) {\n      const student = await contract.methods.students(i).call();\n      this.setState({\n        students: [...this.state.students, student]\n      });\n    }\n\n    for (var j = 1; j <= diplomaCount; j++) {\n      const diploma = await contract.methods.diplomas(j).call();\n      this.setState({\n        diplomas: [...this.state.diplomas, diploma]\n      });\n    }\n\n    for (var k = 1; k <= schoolCount; k++) {\n      const school = await contract.methods.schools(k).call();\n      this.setState({\n        schools: [...this.state.schools, school]\n      });\n    }\n\n    for (var l = 1; l <= degreeCount; l++) {\n      const degree = await contract.methods.degrees(l).call();\n      this.setState({\n        degrees: [...this.state.degrees, degree]\n      });\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      diplomas: {\n        idStudent: 0,\n        idDegree: 0\n      },\n      students: {\n        name: 'N/A',\n        idStudent: 0,\n        INE: 0,\n        fisrtName: 'N/A',\n        lastName: 'N/A',\n        birth: 0\n      },\n      degrees: {\n        idDegree: 0,\n        idSchool: 0,\n        year: 0,\n        nameDegree: 'N/A',\n        schoolName: 'N/A'\n      },\n      schools: {\n        schoolAddress: 'N/A',\n        idSchool: 0,\n        schoolName: 'N/A'\n      },\n      diplomaResult: 'N/A',\n      openModal: false,\n      setOpenModal: false\n    };\n    this.state = {\n      account: '',\n      diplomaCount: 0,\n      studentCount: 0,\n      degreeCount: 0,\n      schoolCount: 0,\n      students: [],\n      schools: [],\n      degrees: [],\n      diplomas: [],\n      diplomaResult: 'N/A',\n      ModalShow: false\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  async checkDiploma(INE, firstName, lastName, birth, dYear, nameDegree, schoolName) {\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const diplomaResult = await contract.methods.checkDiploma(INE, firstName, lastName, birth, dYear, nameDegree, schoolName).call();\n    this.setState({\n      diplomaResult\n    });\n    console.log('Diplomaaaa Result: ', diplomaResult);\n  }\n\n  onChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    console.log(name, value, this.state);\n    this.setState({\n      [name]: value\n    });\n    console.log(name, value, this.state);\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n    const diplomaResult = this.checkDiploma(this.state.INE, this.state.firstName, this.state.lastName, this.state.birth, this.state.dYear, this.state.nameDegree, this.state.schoolName);\n    this.setState(diplomaResult);\n  }\n\n  render() {\n    const openModal = this.state;\n    const setOpenModal = this.state;\n\n    let ModalClose = () => this.setState({\n      ModalShow: false\n    });\n\n    const showModal = diplomaResult => {\n      setOpenModal(true);\n    };\n\n    const hideModal = () => {\n      setOpenModal(false);\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5 text-center center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }\n    }, \"Check Diploma\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, \"Rentrez les informations de l'\\xE9tudiant dont vous voulez v\\xE9rifier son dipl\\xF4me:  \")))))), /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, \"INE number\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the INE number\",\n      name: \"INE\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the First Name\",\n      name: \"firstName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Last Name\",\n      name: \"lastName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }, \"Birthday\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Birthday\",\n      name: \"birth\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, \"Degree Year\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Degree Year\",\n      name: \"dYear\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }\n    }, \"Degree Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Degree Name \",\n      name: \"nameDegree\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, \"School Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the School Name\",\n      name: \"schoolName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(ButtonToolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => showModal(this.state.diplomaResult),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }\n    }, \"Check Diploma\"), /*#__PURE__*/React.createElement(ModalCheckDiploma, {\n      showModal: openModal,\n      hideModal: hideModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.onSubmitBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: this.onSubmitReload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }\n    }, \"Refresh\"))))));\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back();\n  }\n\n  onSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload();\n  }\n\n}\nexport default CheckDiplomas;","map":{"version":3,"sources":["C:/Users/francesca/Desktop/Code SmartContract/react-boost-test/src/components/CheckDiplomas.js"],"names":["React","Component","createContract","Button","ButtonGroup","Form","Spinner","Modal","ButtonToolbar","web3","NavBar","ModalCheckDiploma","CheckDiplomas","componentDidMount","getDiplomas","getDiplomaStorageAddress","props","match","params","address","contract","accounts","eth","getAccounts","setState","account","console","log","diplomaCount","methods","call","studentCount","degreeCount","schoolCount","i","student","students","state","j","diploma","diplomas","k","school","schools","l","degree","degrees","constructor","idStudent","idDegree","name","INE","fisrtName","lastName","birth","idSchool","year","nameDegree","schoolName","schoolAddress","diplomaResult","openModal","setOpenModal","ModalShow","onChange","bind","onSubmit","checkDiploma","firstName","dYear","event","target","value","preventDefault","render","ModalClose","showModal","hideModal","onSubmitBack","onSubmitReload","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\r\nimport { createContract } from './../ethereum/DiplomaStorageContract'\r\nimport { Button, ButtonGroup, Form, Spinner, Modal, ButtonToolbar } from 'react-bootstrap';\r\nimport { web3 } from './../ethereum/web3';\r\nimport NavBar from './../assets/NavBar';\r\nimport { ModalCheckDiploma } from './../assets/PopupCDiploma';\r\n\r\n\r\n\r\n\r\nexport class CheckDiplomas extends Component {\r\n\r\n    state = {\r\n        diplomas: {\r\n            idStudent: 0,\r\n            idDegree: 0,\r\n        },\r\n\r\n        students: {\r\n            name:'N/A',\r\n            idStudent: 0,\r\n            INE: 0,\r\n            fisrtName: 'N/A',\r\n            lastName: 'N/A',\r\n            birth: 0,\r\n        }, \r\n\r\n        degrees: {\r\n            idDegree: 0,\r\n            idSchool: 0,\r\n            year: 0,\r\n            nameDegree: 'N/A',\r\n            schoolName: 'N/A', \r\n        },\r\n\r\n        schools: {\r\n            schoolAddress: 'N/A',\r\n            idSchool: 0,\r\n            schoolName: 'N/A',\r\n        },\r\n\r\n        diplomaResult: 'N/A',\r\n\r\n        openModal: false,\r\n        setOpenModal:false,\r\n\r\n    }\r\n\r\n  async componentDidMount () {\r\n    await this.getDiplomas(this.getDiplomaStorageAddress()\r\n    )\r\n  }\r\n  \r\n  getDiplomaStorageAddress () {\r\n    return this.props.match.params.address\r\n  }\r\n\r\n  async getDiplomas(address) {\r\n    const contract = createContract(address)\r\n    const accounts = await web3.eth.getAccounts()\r\n    this.setState({ account: accounts[0] })\r\n    console.log(accounts)\r\n    \r\n    this.setState({ contract })\r\n    console.log(contract)\r\n\r\n    const diplomaCount = await contract.methods.diplomaCount().call()\r\n    this.setState({diplomaCount})\r\n\r\n    const studentCount = await contract.methods.studentCount().call()\r\n    this.setState({studentCount})\r\n\r\n    const degreeCount = await contract.methods.degreeCount().call()\r\n    this.setState({degreeCount})\r\n    \r\n    const schoolCount = await contract.methods.schoolCount().call()\r\n    this.setState([schoolCount])\r\n\r\n    for (var i = 1; i <= studentCount; i++) {\r\n        const student = await contract.methods.students(i).call()\r\n        this.setState({\r\n          students: [...this.state.students, student]\r\n        })\r\n      }\r\n\r\n\r\n    for (var j = 1; j <= diplomaCount; j++) {\r\n        const diploma = await contract.methods.diplomas(j).call()\r\n        this.setState({\r\n          diplomas: [...this.state.diplomas, diploma]\r\n        })\r\n      }\r\n\r\n\r\n      for (var k = 1; k <= schoolCount; k++) {\r\n        const school = await contract.methods.schools(k).call()\r\n        this.setState({\r\n          schools: [...this.state.schools, school]\r\n        })\r\n      }\r\n\r\n      for (var l = 1; l <= degreeCount; l++) {\r\n        const degree = await contract.methods.degrees(l).call()\r\n        this.setState({\r\n          degrees: [...this.state.degrees, degree]\r\n        })\r\n      }\r\n}\r\n\r\nconstructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      account:'',\r\n      diplomaCount: 0,\r\n      studentCount: 0,\r\n      degreeCount: 0,\r\n      schoolCount:0,\r\n      students: [],\r\n      schools: [],\r\n      degrees: [],\r\n      diplomas: [],\r\n      diplomaResult: 'N/A',\r\n      ModalShow: false,\r\n    }\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n}\r\n\r\n\r\n    async checkDiploma(INE, firstName, lastName, birth, dYear, nameDegree, schoolName) {\r\n    const contract = createContract(this.getDiplomaStorageAddress())\r\n    \r\n    this.setState({ contract })\r\n    console.log(contract)\r\n    \r\n    \r\n    const diplomaResult = await contract.methods.checkDiploma(INE, firstName, lastName, birth, dYear, nameDegree, schoolName).call()\r\n    this.setState({diplomaResult})\r\n    console.log('Diplomaaaa Result: ', diplomaResult)\r\n}\r\n\r\n\r\n    onChange(event) {\r\n    \r\n    const target = event.target;\r\n    const value =  target.value;\r\n    const name = target.name;\r\n    console.log(name,value,this.state) \r\n    this.setState({\r\n      [name]: value\r\n    });\r\n    console.log(name,value,this.state)  \r\n}\r\n\r\n\r\n    onSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    const diplomaResult =  this.checkDiploma(this.state.INE, this.state.firstName, this.state.lastName, this.state.birth, this.state.dYear, this.state.nameDegree, this.state.schoolName)\r\n    this.setState(diplomaResult)\r\n    \r\n}\r\n\r\nrender () {\r\n\r\n    const openModal = this.state\r\n    const setOpenModal = this.state\r\n    let ModalClose =() => this.setState({ModalShow:false});\r\n\r\n    const showModal = diplomaResult => { setOpenModal(true)};\r\n\r\n    const hideModal =() => { setOpenModal(false)};\r\n        \r\n    \r\n\r\n    return (\r\n\r\n    <div>\r\n        <div>\r\n            <NavBar/>\r\n        </div>\r\n\r\n        <div className=\"container\">\r\n          <div className=\"row mt-5 text-center center\">\r\n            <div className=\"col-lg-10 mb-4 grid-margin\">\r\n              <div className=\"card h-100\">\r\n                  <h4 className=\"card-header\">Check Diploma</h4>\r\n                  <div className=\"card-body\">\r\n                    <p className=\"card-text\">Rentrez les informations de l'étudiant dont vous voulez vérifier son diplôme:  </p>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n        </div>    \r\n      </div>\r\n\r\n\r\n        <Form>\r\n            <Form.Group controlId=\"formGroupEmail\">\r\n                <Form.Label>INE number</Form.Label>\r\n                <Form.Control \r\n                    placeholder= 'Enter the INE number'\r\n                    name=\"INE\"\r\n                    type=\"number\"\r\n                    onChange={this.onChange}  />\r\n            </Form.Group>\r\n            \r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>First Name</Form.Label>\r\n                <Form.Control \r\n                    placeholder='Enter the First Name'\r\n                    name=\"firstName\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>Last Name</Form.Label>\r\n                <Form.Control \r\n                    placeholder= 'Enter the Last Name'\r\n                    name=\"lastName\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>Birthday</Form.Label>\r\n                <Form.Control \r\n                    placeholder= 'Enter the Birthday'\r\n                    name=\"birth\"\r\n                    type=\"number\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>Degree Year</Form.Label>\r\n                <Form.Control \r\n                    placeholder= 'Enter the Degree Year'\r\n                    name=\"dYear\"\r\n                    type=\"number\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>Degree Name</Form.Label>\r\n                <Form.Control \r\n                    placeholder= 'Enter the Degree Name '\r\n                    name=\"nameDegree\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n            \r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>School Name</Form.Label>\r\n                <Form.Control \r\n                    placeholder= 'Enter the School Name'\r\n                    name=\"schoolName\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n        </Form>\r\n      \r\n\r\n        {/* AJOUTER UN POP UP QUI DONNE LE RESULTAT DE CHECK DIPLOMA */}\r\n        <ButtonToolbar>\r\n        <Button variant=\"primary\" \r\n          onClick={() => showModal(this.state.diplomaResult)}\r\n          >Check Diploma\r\n        </Button>\r\n\r\n        <ModalCheckDiploma showModal={ openModal } hideModal={hideModal}>\r\n            \r\n        </ModalCheckDiploma>\r\n\r\n      </ButtonToolbar>\r\n\r\n\r\n\r\n        <div className=\"container\">\r\n          <div className=\"row mt-5\">\r\n            <div className=\"col-lg-4 mb-4 grid-margin\">\r\n          <ButtonGroup size=\"lg\" >\r\n                <Button variant=\"primary\" \r\n                    onClick={this.onSubmitBack}\r\n                    >Back\r\n                </Button>\r\n                <Button variant=\"light\" \r\n                    onClick={this.onSubmitReload}\r\n                    >Refresh\r\n                </Button>\r\n          </ButtonGroup>\r\n        </div>\r\n      </div>\r\n    </div> \r\n            \r\n      </div>\r\n\r\n        );\r\n    }\r\n\r\n    onSubmitBack(event) {\r\n        event.preventDefault();\r\n        window.history.back()\r\n    }\r\n    \r\n    onSubmitReload(event) {\r\n        event.preventDefault();\r\n        window.location.reload()\r\n    }\r\n}\r\n\r\nexport default CheckDiplomas;"]},"metadata":{},"sourceType":"module"}