{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/RenderDiplomas.js\";\nimport React, { Component } from 'react';\nimport { createContract } from './../ethereum/DiplomaStorageContract';\nimport { ButtonGroup, Button } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\nexport class RenderDiplomas extends Component {\n  async componentDidMount() {\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    await this.getDiplomas(this.getDiplomaStorageAddress());\n  }\n\n  getDiplomaStorageAddress() {\n    return this.props.match.params.address;\n  }\n\n  async getDiplomas(address) {\n    const contract = createContract(address);\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(accounts);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const diplomaCount = await contract.methods.diplomaCount().call();\n    const studentCount = await contract.methods.studentCount().call();\n    this.setState({\n      diplomaCount\n    });\n    this.setState({\n      studentCount\n    });\n    console.log(diplomaCount);\n\n    for (var i = 1; i <= diplomaCount; i++) {\n      const diploma = await contract.methods.diplomas(i).call();\n      this.setState({\n        diplomas: [...this.state.diplomas, diploma]\n      });\n      console.log(diploma);\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      diplomas: {\n        id: 0,\n        idDegree: 0,\n        idStudent: 0\n      },\n      contract: ''\n    };\n    this.state = {\n      account: '',\n      diplomaCount: 0,\n      diplomas: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, \"All the Diplomas are here below\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, \"Voici la liste des diplomes enregistr\\xE9s sur la blockchain. \")))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }\n    }, \"idDegree\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }\n    }, \"idStudent\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, \"Nom\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }, \"Prenom\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, \"Date de naissance\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, \"Diplome\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, \"Ecole\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }, \"Date d'obtention\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 5\n      }\n    }, this.state.diplomas.map((diploma, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }\n      }, diploma.id));\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 5\n      }\n    }, this.state.diplomas.map((diploma, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      }, diploma.idDegree));\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 5\n      }\n    }, this.state.diplomas.map((diploma, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }\n      }, diploma.idStudent));\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 5\n      }\n    }, this.state.diplomas.map((diploma, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 17\n        }\n      }, this.state.contract.methods.students(diploma.idStudent).call()));\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.onSubmitBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: this.onSubmitReload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, \"Refresh\")))));\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back();\n  }\n\n  onSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload();\n  }\n\n}\nexport default RenderDiplomas;","map":{"version":3,"sources":["/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/RenderDiplomas.js"],"names":["React","Component","createContract","ButtonGroup","Button","web3","NavBar","RenderDiplomas","componentDidMount","contract","getDiplomaStorageAddress","setState","getDiplomas","props","match","params","address","accounts","eth","getAccounts","account","console","log","diplomaCount","methods","call","studentCount","i","diploma","diplomas","state","constructor","id","idDegree","idStudent","render","map","key","students","onSubmitBack","onSubmitReload","event","preventDefault","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\nimport { createContract } from './../ethereum/DiplomaStorageContract'\nimport { ButtonGroup, Button } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\n\n\n\n\nexport class RenderDiplomas extends Component {\n\n    state = {\n        diplomas: {\n            id: 0,\n            idDegree: 0,\n            idStudent: 0,\n        },\n      contract:''\n\n    }\n\n  async componentDidMount () {\n    const contract = createContract(this.getDiplomaStorageAddress ())\n    this.setState({contract})\n    await this.getDiplomas(this.getDiplomaStorageAddress()\n    )\n  }\n  \n  getDiplomaStorageAddress () {\n    return this.props.match.params.address\n  }\n\n  async getDiplomas(address) {\n    const contract = createContract(address)\n    const accounts = await web3.eth.getAccounts()\n    this.setState({ account: accounts[0] })\n    console.log(accounts)\n    \n    this.setState({ contract })\n    console.log(contract)\n\n    const diplomaCount = await contract.methods.diplomaCount().call()\n    const studentCount = await contract.methods.studentCount().call()\n    this.setState({diplomaCount})\n    this.setState({studentCount})\n    console.log(diplomaCount)\n\n    for (var i = 1; i <= diplomaCount; i++) {\n        const diploma = await contract.methods.diplomas(i).call()\n        this.setState({\n          diplomas: [...this.state.diplomas, diploma]\n        })\n        console.log(diploma)\n      }\n\n    \n}\n\nconstructor(props) {\n    super(props)\n    this.state = {\n      account:'',\n      diplomaCount: 0,\n      diplomas: [],\n    }\n}\n\n\n\n  render() {\n    return (\n      <div>\n          <header>\n              <NavBar/>\n          </header>\n\n          <div className=\"container\">\n           <div className=\"row mt-5 text-center\">\n            <div className=\"col-lg-10 mb-4 grid-margin\">\n              <div className=\"card h-100\">\n                  <h4 className=\"card-header\">All the Diplomas are here below</h4>\n                  <div className=\"card-body\">\n                    <p className=\"card-text\">Voici la liste des diplomes enregistr√©s sur la blockchain. </p>\n                  </div>\n              </div>\n            </div>\n        </div>    \n      </div>\n          \n            \n      <div>\n     <table className=\"table\">\n      <thead className=\"thead-dark\">\n    <tr>\n      <th scope=\"col\">#</th>\n      <th scope=\"col\">idDegree</th>\n      <th scope=\"col\">idStudent</th>\n      <th scope=\"col\">Nom</th>\n      <th scope=\"col\">Prenom</th>\n      <th scope=\"col\">Date de naissance</th>\n      <th scope=\"col\">Diplome</th>\n      <th scope=\"col\">Ecole</th>\n      <th scope=\"col\">Date d'obtention</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n    <th scope=\"row\">\n          { this.state.diplomas.map((diploma, key) => {\n            return(\n              \n              <div key={key}>\n                <td>\n                  {diploma.id}\n                </td>\n              </div>\n              \n             )\n          })}\n      </th>\n\n    <td>\n      { this.state.diplomas.map((diploma, key) => {\n            return(\n              \n              <div key={key}>\n                <td>\n                  {diploma.idDegree}\n                </td>\n              </div> \n              \n                 )\n        })}\n    </td> \n\n    <td> \n      { this.state.diplomas.map((diploma, key) => {\n            return(\n              <div key={key}>\n                <td>\n                  {diploma.idStudent}\n              </td>\n            </div> \n              \n                 )\n        })}\n    </td>\n\n    <td> \n      { this.state.diplomas.map((diploma, key) => {\n            return(\n              <div key={key}>\n                <td>\n                  {this.state.contract.methods.students(diploma.idStudent).call()}\n              </td>\n            </div> \n              \n                 )\n        })}\n    </td>  \n      \n    </tr>\n  </tbody>\n</table>\n\n\n    <div className=\"container\">\n          <ButtonGroup size=\"lg\" >\n                <Button variant=\"primary\" \n                    onClick={this.onSubmitBack}\n                    >Back\n                </Button>\n                <Button variant=\"light\" \n                    onClick={this.onSubmitReload}\n                    >Refresh\n                </Button>\n          </ButtonGroup>\n    </div> \n                  \n  </div>  \n      \n</div>\n    );\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back()\n}\n\nonSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload()\n}\n}\n\nexport default RenderDiplomas;"]},"metadata":{},"sourceType":"module"}