{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/RenderAddresses.js\";\nimport React, { Component } from 'react';\nimport { createContract } from './../ethereum/DiplomaStorageContract';\nimport { ButtonGroup, Button } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\nexport class RenderAddresses extends Component {\n  async componentDidMount() {\n    await this.getSchools(this.getDiplomaStorageAddress());\n  }\n\n  getDiplomaStorageAddress() {\n    return this.props.match.params.address;\n  }\n\n  async getSchools(address) {\n    const contract = createContract(address);\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(accounts);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const schoolCount = await contract.methods.masterCount().call();\n    this.setState({\n      schoolCount\n    });\n\n    for (var i = 1; i <= schoolCount; i++) {\n      const school = await contract.methods.masters(i).call();\n      this.setState({\n        schools: [...this.state.schools, school]\n      });\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      schools: {\n        id: 0,\n        name: 'N/A'\n      }\n    };\n    this.state = {\n      account: '',\n      schoolCount: 0,\n      schools: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }\n    }, \"All the schools are here below\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"Voici la liste des \\xE9coles enregistr\\xE9s sur la blockchain. \")))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 2\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 3\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 3\n      }\n    }, \"Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 1\n      }\n    }, this.state.schools.map((school, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, school.id));\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 1\n      }\n    }, this.state.schools.map((school, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }, school.name));\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.onSubmitBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: this.onSubmitReload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, \"Refresh\")))));\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back();\n  }\n\n  onSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload();\n  }\n\n}\nexport default RenderAddresses;","map":{"version":3,"sources":["/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/RenderAddresses.js"],"names":["React","Component","createContract","ButtonGroup","Button","web3","NavBar","RenderAddresses","componentDidMount","getSchools","getDiplomaStorageAddress","props","match","params","address","contract","accounts","eth","getAccounts","setState","account","console","log","schoolCount","methods","masterCount","call","i","school","masters","schools","state","constructor","id","name","render","map","key","onSubmitBack","onSubmitReload","event","preventDefault","window","history","back","location","reload"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAkC,OAAlC;AACA,SAASC,cAAT,QAA+B,sCAA/B;AACA,SAASC,WAAT,EAAsBC,MAAtB,QAAoC,iBAApC;AACA,SAASC,IAAT,QAAqB,oBAArB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AAKA,OAAO,MAAMC,eAAN,SAA8BN,SAA9B,CAAwC;AAU/C,QAAMO,iBAAN,GAA2B;AAC3B,UAAM,KAAKC,UAAL,CAAgB,KAAKC,wBAAL,EAAhB,CAAN;AAEC;;AAEDA,EAAAA,wBAAwB,GAAI;AAC5B,WAAO,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,OAA/B;AACC;;AAED,QAAML,UAAN,CAAiBK,OAAjB,EAA0B;AAC1B,UAAMC,QAAQ,GAAGb,cAAc,CAACY,OAAD,CAA/B;AACA,UAAME,QAAQ,GAAG,MAAMX,IAAI,CAACY,GAAL,CAASC,WAAT,EAAvB;AACA,SAAKC,QAAL,CAAc;AAAEC,MAAAA,OAAO,EAAEJ,QAAQ,CAAC,CAAD;AAAnB,KAAd;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;AAEA,SAAKG,QAAL,CAAc;AAAEJ,MAAAA;AAAF,KAAd;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYP,QAAZ;AAEA,UAAMQ,WAAW,GAAG,MAAMR,QAAQ,CAACS,OAAT,CAAiBC,WAAjB,GAA+BC,IAA/B,EAA1B;AACA,SAAKP,QAAL,CAAc;AAACI,MAAAA;AAAD,KAAd;;AAEA,SAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIJ,WAArB,EAAkCI,CAAC,EAAnC,EAAuC;AACnC,YAAMC,MAAM,GAAG,MAAMb,QAAQ,CAACS,OAAT,CAAiBK,OAAjB,CAAyBF,CAAzB,EAA4BD,IAA5B,EAArB;AACA,WAAKP,QAAL,CAAc;AACZW,QAAAA,OAAO,EAAE,CAAC,GAAG,KAAKC,KAAL,CAAWD,OAAf,EAAwBF,MAAxB;AADG,OAAd;AAGD;AAEF;;AAEDI,EAAAA,WAAW,CAACrB,KAAD,EAAQ;AACnB,UAAMA,KAAN;AADmB,SAtCjBoB,KAsCiB,GAtCT;AACND,MAAAA,OAAO,EAAE;AACLG,QAAAA,EAAE,EAAE,CADC;AAELC,QAAAA,IAAI,EAAE;AAFD;AADH,KAsCS;AAEnB,SAAKH,KAAL,GAAa;AACXX,MAAAA,OAAO,EAAC,EADG;AAEXG,MAAAA,WAAW,EAAE,CAFF;AAGXO,MAAAA,OAAO,EAAE;AAHE,KAAb;AAKC;;AAIDK,EAAAA,MAAM,GAAG;AACT,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAKI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yEADF,CAFJ,CADF,CADD,CADD,CALJ,eAmBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACD;AAAO,MAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAO,MAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,eAEE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,CADE,CADD,eAOD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ,KAAKJ,KAAL,CAAWD,OAAX,CAAmBM,GAAnB,CAAuB,CAACR,MAAD,EAASS,GAAT,KAAiB;AACxC,0BAEE;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGT,MAAM,CAACK,EADV,CADF,CAFF;AASD,KAVC,CADR,CADA,eAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,KAAKF,KAAL,CAAWD,OAAX,CAAmBM,GAAnB,CAAuB,CAACR,MAAD,EAASS,GAAT,KAAiB;AACpC,0BAEE;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGT,MAAM,CAACM,IADV,CADF,CAFF;AASH,KAVD,CADJ,CAfA,CADA,CAPC,CADC,eA0CF;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACM,oBAAC,WAAD;AAAa,MAAA,IAAI,EAAC,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACM,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,SAAhB;AACI,MAAA,OAAO,EAAE,KAAKI,YADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADN,eAKM,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,OAAhB;AACI,MAAA,OAAO,EAAE,KAAKC,cADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALN,CADN,CA1CE,CAnBA,CADF;AA+EC;;AAEDD,EAAAA,YAAY,CAACE,KAAD,EAAQ;AACpBA,IAAAA,KAAK,CAACC,cAAN;AACAC,IAAAA,MAAM,CAACC,OAAP,CAAeC,IAAf;AACC;;AAEDL,EAAAA,cAAc,CAACC,KAAD,EAAQ;AACtBA,IAAAA,KAAK,CAACC,cAAN;AACAC,IAAAA,MAAM,CAACG,QAAP,CAAgBC,MAAhB;AACC;;AA7I8C;AAgJ/C,eAAevC,eAAf","sourcesContent":["import React, { Component }  from 'react'\nimport { createContract } from './../ethereum/DiplomaStorageContract'\nimport { ButtonGroup, Button } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\n\n\n\n\nexport class RenderAddresses extends Component {\n\n  state = {\n    schools: {\n        id: 0,\n        name: 'N/A',\n    }\n\n}\n\nasync componentDidMount () {\nawait this.getSchools(this.getDiplomaStorageAddress()\n)\n}\n\ngetDiplomaStorageAddress () {\nreturn this.props.match.params.address\n}\n\nasync getSchools(address) {\nconst contract = createContract(address)\nconst accounts = await web3.eth.getAccounts()\nthis.setState({ account: accounts[0] })\nconsole.log(accounts)\n\nthis.setState({ contract })\nconsole.log(contract)\n\nconst schoolCount = await contract.methods.masterCount().call()\nthis.setState({schoolCount})\n\nfor (var i = 1; i <= schoolCount; i++) {\n    const school = await contract.methods.masters(i).call()\n    this.setState({\n      schools: [...this.state.schools, school]\n    })\n  }\n\n}\n\nconstructor(props) {\nsuper(props)\nthis.state = {\n  account:'',\n  schoolCount: 0,\n  schools: [],\n}\n}\n\n\n\nrender() {\nreturn (\n  <div>\n      <header>\n          <NavBar/>\n      </header>\n\n      <div className=\"container\">\n       <div className=\"row mt-5 text-center\">\n        <div className=\"col-lg-10 mb-4 grid-margin\">\n          <div className=\"card h-100\">\n              <h4 className=\"card-header\">All the schools are here below</h4>\n              <div className=\"card-body\">\n                <p className=\"card-text\">Voici la liste des écoles enregistrés sur la blockchain. </p>\n              </div>\n          </div>\n        </div>\n    </div>    \n  </div>\n      \n        \n  <div>\n <table className=\"table\">\n  <thead className=\"thead-dark\">\n<tr>\n  <th scope=\"col\">#</th>\n  <th scope=\"col\">Name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<th scope=\"row\">\n      { this.state.schools.map((school, key) => {\n        return(\n          \n          <div key={key}>\n            <td>\n              {school.id}\n            </td>\n          </div>\n          \n         )\n      })}\n  </th>\n\n<td>\n  { this.state.schools.map((school, key) => {\n        return(\n          \n          <div key={key}>\n            <td>\n              {school.name}\n            </td>\n          </div> \n          \n             )\n    })}\n</td> \n</tr>\n</tbody>\n</table>\n\n\n<div className=\"container\">\n      <ButtonGroup size=\"lg\" >\n            <Button variant=\"primary\" \n                onClick={this.onSubmitBack}\n                >Back\n            </Button>\n            <Button variant=\"light\" \n                onClick={this.onSubmitReload}\n                >Refresh\n            </Button>\n      </ButtonGroup>\n</div> \n              \n</div>  \n  \n</div>\n);\n}\n\nonSubmitBack(event) {\nevent.preventDefault();\nwindow.history.back()\n}\n\nonSubmitReload(event) {\nevent.preventDefault();\nwindow.location.reload()\n}\n}\n\nexport default RenderAddresses;"]},"metadata":{},"sourceType":"module"}