{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/CreateDiploma.js\";\nimport React, { Component } from 'react';\nimport { createContract } from './../ethereum/DiplomaStorageContract';\nimport { Button, ButtonGroup, Form, Spinner, Modal, ButtonToolbar } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\nimport { PopupCreateDiploma } from './../assets/PopupCreateDiploma';\nexport class CreateDiploma extends Component {\n  async componentDidMount() {\n    await this.getDiplomas(this.getDiplomaStorageAddress());\n  }\n\n  getDiplomaStorageAddress() {\n    return this.props.match.params.address;\n  }\n\n  async getDiplomas(address) {\n    const contract = createContract(address);\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(accounts);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const diplomaCount = await contract.methods.diplomaCount().call();\n    this.setState({\n      diplomaCount\n    });\n    const studentCount = await contract.methods.studentCount().call();\n    this.setState({\n      studentCount\n    });\n    const degreeCount = await contract.methods.degreeCount().call();\n    this.setState({\n      degreeCount\n    });\n    const schoolCount = await contract.methods.schoolCount().call();\n    this.setState([schoolCount]);\n\n    for (var i = 1; i <= studentCount; i++) {\n      const student = await contract.methods.students(i).call();\n      this.setState({\n        students: [...this.state.students, student]\n      });\n    }\n\n    for (var j = 1; j <= diplomaCount; j++) {\n      const diploma = await contract.methods.diplomas(j).call();\n      this.setState({\n        diplomas: [...this.state.diplomas, diploma]\n      });\n    }\n\n    for (var k = 1; k <= schoolCount; k++) {\n      const school = await contract.methods.schools(k).call();\n      this.setState({\n        schools: [...this.state.schools, school]\n      });\n    }\n\n    for (var l = 1; l <= degreeCount; l++) {\n      const degree = await contract.methods.degrees(l).call();\n      this.setState({\n        degrees: [...this.state.degrees, degree]\n      });\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      diplomas: {\n        idStudent: 0,\n        idDegree: 0\n      },\n      students: {\n        name: 'N/A',\n        idStudent: 0,\n        INE: 0,\n        fisrtName: 'N/A',\n        lastName: 'N/A',\n        birth: 0\n      },\n      degrees: {\n        idDegree: 0,\n        idSchool: 0,\n        year: 0,\n        nameDegree: 'N/A',\n        schoolName: 'N/A'\n      },\n      schools: {\n        schoolAddress: 'N/A',\n        idSchool: 0,\n        schoolName: 'N/A'\n      },\n      diplomaResult: 'N/A'\n    };\n    this.state = {\n      account: '',\n      diplomaCount: 0,\n      studentCount: 0,\n      degreeCount: 0,\n      schoolCount: 0,\n      students: [],\n      schools: [],\n      degrees: [],\n      diplomas: [],\n      diplomaResult: 'N/A',\n      ModalShow: false\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  createDiploma(INE, firstName, lastName, birth, dYear, nameDegree, schoolName) {\n    console.log('account', this.state.account);\n    this.state.contract.methods.createDiploma(INE, firstName, lastName, birth, dYear, nameDegree, schoolName).send({\n      from: this.state.account\n    });\n    console.log(\"Account\", this.state.account);\n  }\n\n  onChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    console.log(name, value, this.state);\n    this.setState({\n      [name]: value\n    });\n    console.log(name, value, this.state);\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n    this.createDiploma(this.state.INE, this.state.firstName, this.state.lastName, this.state.birth, this.state.dYear, this.state.nameDegree, this.state.schoolName);\n  }\n\n  render() {\n    let ModalClose = () => this.setState({\n      ModalShow: false\n    });\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5 text-center center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 19\n      }\n    }, \"Create Degree\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, \"Rentrez les informations du dipl\\xF4me et du student que vous voulez associer:  \")))))), /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, \"INE\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the INE\",\n      name: \"INE\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, \"firstName\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the firstName\",\n      name: \"firstName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, \"lastName\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the lastName\",\n      name: \"lastName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, \"birth\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the birth\",\n      name: \"birth\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the year\",\n      name: \"dYear\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }\n    }, \"nameDegree\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the name Degree\",\n      name: \"nameDegree\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }\n    }, \"schoolName\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the schoolName\",\n      name: \"schoolName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ButtonToolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.setState({\n        ModalShow: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }\n    }, \"Create Diploma\"), /*#__PURE__*/React.createElement(PopupCreateDiploma, {\n      show: this.state.ModalShow,\n      onHide: ModalClose,\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.onSubmitBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: this.onSubmitReload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }\n    }, \"Refresh\"))))));\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back();\n  }\n\n  onSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload();\n  }\n\n}\nexport default CreateDiploma;","map":{"version":3,"sources":["/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/CreateDiploma.js"],"names":["React","Component","createContract","Button","ButtonGroup","Form","Spinner","Modal","ButtonToolbar","web3","NavBar","PopupCreateDiploma","CreateDiploma","componentDidMount","getDiplomas","getDiplomaStorageAddress","props","match","params","address","contract","accounts","eth","getAccounts","setState","account","console","log","diplomaCount","methods","call","studentCount","degreeCount","schoolCount","i","student","students","state","j","diploma","diplomas","k","school","schools","l","degree","degrees","constructor","idStudent","idDegree","name","INE","fisrtName","lastName","birth","idSchool","year","nameDegree","schoolName","schoolAddress","diplomaResult","ModalShow","onChange","bind","onSubmit","createDiploma","firstName","dYear","send","from","event","target","value","preventDefault","render","ModalClose","onSubmitBack","onSubmitReload","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\r\nimport { createContract } from './../ethereum/DiplomaStorageContract'\r\nimport { Button, ButtonGroup, Form, Spinner, Modal, ButtonToolbar } from 'react-bootstrap';\r\nimport { web3 } from './../ethereum/web3';\r\nimport NavBar from './../assets/NavBar';\r\nimport { PopupCreateDiploma } from './../assets/PopupCreateDiploma';\r\n\r\n\r\n\r\n\r\nexport class CreateDiploma extends Component {\r\n\r\n  state = {\r\n      diplomas: {\r\n          idStudent: 0,\r\n          idDegree: 0,\r\n      },\r\n\r\n      students: {\r\n          name:'N/A',\r\n          idStudent: 0,\r\n          INE: 0,\r\n          fisrtName: 'N/A',\r\n          lastName: 'N/A',\r\n          birth: 0,\r\n      },\r\n\r\n      degrees: {\r\n          idDegree: 0,\r\n          idSchool: 0,\r\n          year: 0,\r\n          nameDegree: 'N/A',\r\n          schoolName: 'N/A',\r\n      },\r\n\r\n      schools: {\r\n          schoolAddress: 'N/A',\r\n          idSchool: 0,\r\n          schoolName: 'N/A',\r\n      },\r\n\r\n      diplomaResult: 'N/A',\r\n\r\n  }\r\n\r\n  async componentDidMount () {\r\n      await this.getDiplomas(this.getDiplomaStorageAddress()\r\n      )\r\n    }\r\n\r\n  getDiplomaStorageAddress () {\r\n      return this.props.match.params.address\r\n    }\r\n\r\n  async getDiplomas(address) {\r\n      const contract = createContract(address)\r\n      const accounts = await web3.eth.getAccounts()\r\n      this.setState({ account: accounts[0] })\r\n      console.log(accounts)\r\n\r\n      this.setState({ contract })\r\n      console.log(contract)\r\n\r\n      const diplomaCount = await contract.methods.diplomaCount().call()\r\n      this.setState({diplomaCount})\r\n\r\n      const studentCount = await contract.methods.studentCount().call()\r\n      this.setState({studentCount})\r\n\r\n      const degreeCount = await contract.methods.degreeCount().call()\r\n      this.setState({degreeCount})\r\n\r\n      const schoolCount = await contract.methods.schoolCount().call()\r\n      this.setState([schoolCount])\r\n\r\n      for (var i = 1; i <= studentCount; i++) {\r\n          const student = await contract.methods.students(i).call()\r\n          this.setState({\r\n            students: [...this.state.students, student]\r\n          })\r\n        }\r\n\r\n\r\n      for (var j = 1; j <= diplomaCount; j++) {\r\n          const diploma = await contract.methods.diplomas(j).call()\r\n          this.setState({\r\n            diplomas: [...this.state.diplomas, diploma]\r\n          })\r\n        }\r\n\r\n\r\n        for (var k = 1; k <= schoolCount; k++) {\r\n          const school = await contract.methods.schools(k).call()\r\n          this.setState({\r\n            schools: [...this.state.schools, school]\r\n          })\r\n        }\r\n\r\n        for (var l = 1; l <= degreeCount; l++) {\r\n          const degree = await contract.methods.degrees(l).call()\r\n          this.setState({\r\n            degrees: [...this.state.degrees, degree]\r\n          })\r\n        }\r\n  }\r\n\r\n  constructor(props) {\r\n      super(props)\r\n      this.state = {\r\n        account:'',\r\n        diplomaCount: 0,\r\n        studentCount: 0,\r\n        degreeCount: 0,\r\n        schoolCount:0,\r\n        students: [],\r\n        schools: [],\r\n        degrees: [],\r\n        diplomas: [],\r\n        diplomaResult: 'N/A',\r\n        ModalShow: false,\r\n      }\r\n      this.onChange = this.onChange.bind(this);\r\n      this.onSubmit = this.onSubmit.bind(this);\r\n  }\r\n\r\n\r\ncreateDiploma(INE, firstName, lastName, birth, dYear, nameDegree, schoolName) {\r\n    console.log('account',this.state.account)\r\n    this.state.contract.methods.createDiploma(INE, firstName, lastName, birth, dYear, nameDegree, schoolName).send({ from: this.state.account })\r\n    console.log(\"Account\" , this.state.account)\r\n}\r\n\r\n\r\n    onChange(event) {\r\n\r\n    const target = event.target;\r\n    const value =  target.value;\r\n    const name = target.name;\r\n    console.log(name,value,this.state)\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n    console.log(name,value,this.state)\r\n}\r\n\r\n\r\n    onSubmit(event) {\r\n    event.preventDefault();\r\n    this.createDiploma(this.state.INE,this.state.firstName,this.state.lastName,this.state.birth,this.state.dYear,this.state.nameDegree,this.state.schoolName)\r\n  }\r\n\r\n\r\n  render() {\r\n    let ModalClose =() => this.setState({ModalShow:false})\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n            <NavBar/>\r\n        </div>\r\n\r\n        <div className=\"container\">\r\n          <div className=\"row mt-5 text-center center\">\r\n            <div className=\"col-lg-10 mb-4 grid-margin\">\r\n              <div className=\"card h-100\">\r\n                  <h4 className=\"card-header\">Create Degree</h4>\r\n                  <div className=\"card-body\">\r\n                    <p className=\"card-text\">Rentrez les informations du diplôme et du student que vous voulez associer:  </p>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n        <Form>\r\n            <Form.Group controlId=\"formGroupEmail\">\r\n                <Form.Label>INE</Form.Label>\r\n                <Form.Control\r\n                    placeholder= 'Enter the INE'\r\n                    name=\"INE\"\r\n                    type=\"number\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>firstName</Form.Label>\r\n                <Form.Control\r\n                    placeholder='Enter the firstName'\r\n                    name=\"firstName\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>lastName</Form.Label>\r\n                <Form.Control\r\n                    placeholder= 'Enter the lastName'\r\n                    name=\"lastName\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>birth</Form.Label>\r\n                <Form.Control\r\n                    placeholder= 'Enter the birth'\r\n                    name=\"birth\"\r\n                    type=\"number\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>Year</Form.Label>\r\n                <Form.Control\r\n                    placeholder= 'Enter the year'\r\n                    name=\"dYear\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>nameDegree</Form.Label>\r\n                <Form.Control\r\n                    placeholder= 'Enter the name Degree'\r\n                    name=\"nameDegree\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGroupPassword\">\r\n                <Form.Label>schoolName</Form.Label>\r\n                <Form.Control\r\n                    placeholder= 'Enter the schoolName'\r\n                    name=\"schoolName\"\r\n                    type=\"text\"\r\n                    onChange={this.onChange} />\r\n            </Form.Group>\r\n\r\n\r\n        </Form>\r\n\r\n        <div>\r\n\r\n      <ButtonToolbar>\r\n        <Button variant=\"primary\"\r\n          onClick={() => this.setState({ModalShow: true})}\r\n          >Create Diploma\r\n        </Button>\r\n\r\n        <PopupCreateDiploma\r\n          show={this.state.ModalShow}\r\n          onHide={ModalClose}\r\n          onSubmit={this.onSubmit}\r\n        />\r\n      </ButtonToolbar>\r\n\r\n        </div>\r\n\r\n        <div className=\"container\">\r\n          <div className=\"row mt-5\">\r\n            <div className=\"col-lg-4 mb-4 grid-margin\">\r\n          <ButtonGroup size=\"lg\" >\r\n                <Button variant=\"primary\"\r\n                    onClick={this.onSubmitBack}\r\n                    >Back\r\n                </Button>\r\n                <Button variant=\"light\"\r\n                    onClick={this.onSubmitReload}\r\n                    >Refresh\r\n                </Button>\r\n          </ButtonGroup>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onSubmitBack(event) {\r\n    event.preventDefault();\r\n    window.history.back()\r\n    }\r\n\r\n  onSubmitReload(event) {\r\n    event.preventDefault();\r\n    window.location.reload()\r\n    }\r\n}\r\n\r\nexport default CreateDiploma;\r\n"]},"metadata":{},"sourceType":"module"}