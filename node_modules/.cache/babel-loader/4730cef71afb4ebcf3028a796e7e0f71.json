{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Documents/BC_Projects/OPPO-DS/src/components/CheckDiplomaWithId.js\";\nimport React, { Component } from 'react';\nimport { createContract } from '../ethereum/DiplomaStorageContract';\nimport { Table } from 'semantic-ui-react';\nimport '/home/ubuntu/Documents/BC_Projects/OPPO-DS/src/App.css';\nimport Web3 from 'web3';\nimport { web3 } from '../ethereum/web3';\nimport { Button, Header, Form } from 'semantic-ui-react';\nexport class CheckDiplomaWithId extends Component {\n  async componentDidMount() {\n    this.loadBcData();\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    console.log(\"contrat\", contract);\n    this.getContractState(contract);\n    const master = await contract.methods.master().call();\n    console.log('master', master);\n  }\n\n  async getContractState(contract) {\n    this.setState({\n      loading: true\n    });\n    const master = contract.methods.master().call();\n    console.log('master', master);\n  }\n\n  async loadBcData() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    const network = await web3.eth.net.getNetworkType();\n    console.log(\"network\", network);\n    const accounts = await web3.eth.getAccounts();\n    console.log(\"account\", accounts[0]);\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(\"addresseContrat\", this.getDiplomaStorageAddress());\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    const diplomaCount = await contract.methods.diplomaCount().call();\n    this.setState({\n      diplomaCount\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      diplomaId: 0,\n      degreeId: 0,\n      schoolId: 0,\n      valid: false,\n      DiplomaEditor: '',\n      studentId: 0,\n      INE: 0,\n      fisrtName: 'N/A',\n      lastName: 'N/A',\n      StudentEditor: '',\n      birth: 0,\n      idDegree: 0,\n      DegreeEditor: '',\n      nameDegree: '',\n      schoolName: '',\n      year: 0,\n      students: {\n        idStudent: 0,\n        INE: 0,\n        fisrtName: 'N/A',\n        lastName: 'N/A',\n        birth: 0\n      },\n      degrees: {\n        idDegree: 0,\n        nameDegree: ''\n      },\n      diplomas: {\n        idDegree: 0,\n        idStudent: 0\n      }\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      id: 0,\n      account: '',\n      schoolCount: 0,\n      schools: []\n    };\n  }\n\n  getDiplomaStorageAddress() {\n    return '0x64399f5759209029856F40854699f65e57ED4225';\n  }\n\n  async getDiploma(address, id) {\n    const contract = createContract(address);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    console.log('id', id, typeof id);\n    const diploma = await contract.methods.diplomas(id).call();\n    console.log('diploma', diploma);\n    console.log('0', diploma[0]);\n    this.setState({\n      diplomas: [diploma]\n    });\n    console.log(\"diplomas\", this.state.diplomas);\n    console.log(\"diploma\", this.state.diplomas[0][0]);\n    this.setState({\n      degreeId: this.state.diplomas[0][0]\n    });\n    this.setState({\n      studentId: this.state.diplomas[0][1]\n    });\n\n    if (this.state.diplomas[0][2]) {\n      this.setState({\n        valid: 'True'\n      });\n    } else {\n      this.setState({\n        valid: 'False'\n      });\n    }\n\n    this.setState({\n      DiplomaEditor: this.state.diplomas[0][3]\n    });\n    const student = await contract.methods.students(this.state.studentId).call();\n    this.setState({\n      INE: student[1]\n    });\n    this.setState({\n      fisrtName: student[2]\n    });\n    this.setState({\n      lastName: student[3]\n    });\n    this.setState({\n      birth: student[4]\n    });\n    this.setState({\n      StudentEditor: student[5]\n    });\n    const degree = await contract.methods.degrees(this.state.degreeId).call();\n    this.setState({\n      nameDegree: degree[0]\n    });\n    this.setState({\n      schoolName: degree[1]\n    });\n    this.setState({\n      year: degree[2]\n    });\n    this.setState({\n      degreeEditor: degree[4]\n    });\n  }\n\n  onChange(event) {\n    this.setState({\n      id: event.target.value\n    });\n  }\n\n  async onSubmit(event) {\n    event.preventDefault();\n    this.setState({\n      id: event.target.value\n    });\n    this.getDiploma(this.getDiplomaStorageAddress(), parseInt(this.state.id));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      label: \"Id\",\n      type: \"number\",\n      value: this.state.address,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      onClick: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, \"Submit\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }, \"DiplomaCount : \", this.state.diplomaCount), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, \"Contract address: \", this.getDiplomaStorageAddress()), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }, \"Account : \", this.state.account), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"font\", {\n      size: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 14\n      }\n    }, \"Diploma\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003Degree Id : \", this.state.degreeId, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003StudentId : \", this.state.studentId, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003Valid : \", this.state.valid, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"font\", {\n      size: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 14\n      }\n    }, \" Student\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"tabulation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 14\n      }\n    }, \"\\u2003\\u2003\\u2003 INE : \", this.state.INE, \" \")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"tabulation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 14\n      }\n    }, \"\\u2003\\u2003\\u2003 First name : \", this.state.fisrtName, \" \")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"tabulation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 14\n      }\n    }, \"\\u2003\\u2003\\u2003 Last Name : \", this.state.lastName, \" \")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"tabulation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 14\n      }\n    }, \"\\u2003\\u2003\\u2003 Birth : \", this.state.birth, \" \")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"font\", {\n      size: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 14\n      }\n    }, \"Degree\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003 Degree name : \", this.state.nameDegree, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003schoolName : \", this.state.schoolName, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003Year : \", this.state.year, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"font\", {\n      size: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 14\n      }\n    }, \"Editors\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003DiplomaEditor : \", this.state.DiplomaEditor, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003Student Editor: \", this.state.StudentEditor, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }\n    }, \"\\u2003\\u2003\\u2003DegreeEditor : \", this.state.degreeEditor, \" \"));\n  }\n\n}\nexport default CheckDiplomaWithId;","map":{"version":3,"sources":["/home/ubuntu/Documents/BC_Projects/OPPO-DS/src/components/CheckDiplomaWithId.js"],"names":["React","Component","createContract","Table","Web3","web3","Button","Header","Form","CheckDiplomaWithId","componentDidMount","loadBcData","contract","getDiplomaStorageAddress","setState","console","log","getContractState","master","methods","call","loading","givenProvider","network","eth","net","getNetworkType","accounts","getAccounts","account","diplomaCount","constructor","props","state","diplomaId","degreeId","schoolId","valid","DiplomaEditor","studentId","INE","fisrtName","lastName","StudentEditor","birth","idDegree","DegreeEditor","nameDegree","schoolName","year","students","idStudent","degrees","diplomas","onChange","bind","onSubmit","id","schoolCount","schools","getDiploma","address","diploma","student","degree","degreeEditor","event","target","value","preventDefault","parseInt","render"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\nimport { createContract } from '../ethereum/DiplomaStorageContract'\nimport { Table } from 'semantic-ui-react'\nimport '/home/ubuntu/Documents/BC_Projects/OPPO-DS/src/App.css';\nimport Web3 from 'web3'\nimport { web3 } from '../ethereum/web3'\nimport { Button, Header, Form} from 'semantic-ui-react';\n\n\n\n\nexport class CheckDiplomaWithId extends Component {\n\n\n    state = {\n      diplomaId: 0,\n      degreeId: 0,\n      schoolId: 0,\n      valid: false,\n      DiplomaEditor: '',\n      studentId: 0,\n      INE: 0,\n      fisrtName: 'N/A',\n      lastName: 'N/A',\n      StudentEditor: '',\n      birth: 0,\n      idDegree: 0,\n      DegreeEditor: '',\n      nameDegree: '',\n      schoolName: '',\n      year: 0,\n      students: {\n        idStudent: 0,\n        INE: 0,\n        fisrtName: 'N/A',\n        lastName: 'N/A',\n        birth: 0,\n    },\n        degrees: {\n          idDegree: 0,\n          nameDegree: '',\n        },\n\n        diplomas: {\n          idDegree: 0,\n          idStudent: 0,\n        }\n\n    }\n\n  async componentDidMount () {\n    this.loadBcData()\n    const contract = createContract(this.getDiplomaStorageAddress())\n    this.setState({contract})\n    console.log(\"contrat\",contract)\n    this.getContractState(contract)\n    const master =await  contract.methods.master().call()\n    console.log('master',master)\n  }\n\n\n  async getContractState(contract){\n    this.setState({loading:true})\n    const master = contract.methods.master().call()\n    console.log('master',master)\n  }\n\n  async loadBcData(){\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\")\n    const network = await web3.eth.net.getNetworkType()\n    console.log(\"network\",network)\n    const accounts = await web3.eth.getAccounts()\n    console.log(\"account\", accounts[0])\n    this.setState({account: accounts[0]})\n    console.log(\"addresseContrat\",this.getDiplomaStorageAddress())\n\n    const contract = createContract(this.getDiplomaStorageAddress())\n    this.setState({contract})\n    const diplomaCount = await contract.methods.diplomaCount().call()\n    this.setState({diplomaCount})\n  }\n \n  constructor(props) {\n    super(props)\n    this.onChange = this.onChange.bind(this);\n      this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      id : 0,\n      account: '',\n      schoolCount: 0,\n      schools: [],\n\n      \n    }\n  }\n  \n  \n  getDiplomaStorageAddress () {\n    return '0x64399f5759209029856F40854699f65e57ED4225'\n  }\n\n  async getDiploma(address,id) {\n    const contract = createContract(address)\n    \n    this.setState({ contract })\n    console.log(contract)\n\n    console.log('id',id, typeof id)\n    const diploma = await contract.methods.diplomas(id).call()\n    console.log('diploma',diploma)\n    console.log('0',diploma[0])\n    this.setState({\n        diplomas: [diploma]\n    })\n    console.log(\"diplomas\", this.state.diplomas)\n    console.log(\"diploma\", this.state.diplomas[0][0])\n    this.setState({degreeId : this.state.diplomas[0][0]})\n    this.setState({studentId : this.state.diplomas[0][1]})\n    if(this.state.diplomas[0][2]){\n      this.setState({valid : 'True'})\n    }else{this.setState({valid : 'False'})}\n\n    this.setState({DiplomaEditor : this.state.diplomas[0][3]})\n\n    const student = await contract.methods.students(this.state.studentId).call()\n    this.setState({INE : student[1]})\n    this.setState({fisrtName : student[2]})\n    this.setState({lastName : student[3]})\n    this.setState({birth : student[4]})\n    this.setState({StudentEditor : student[5]})\n\n    const degree = await contract.methods.degrees(this.state.degreeId).call()\n    this.setState({nameDegree : degree[0]})\n    this.setState({schoolName : degree[1]})\n    this.setState({year : degree[2]})\n    this.setState({degreeEditor : degree[4]})\n  }\n\n  \n\n\n\n  onChange(event) {\n    this.setState({id: event.target.value});\n}\n\n    async onSubmit(event) {\n    event.preventDefault();\n    this.setState({id: event.target.value});\n    this.getDiploma(this.getDiplomaStorageAddress(),parseInt(this.state.id))\n\n    \n}\n\n  render() {\n    return (\n      \n      \n        <div>\n\n                  <Form>\n                    <Form.Input\n                        label='Id'\n                        type='number'\n                        value={this.state.address}\n                        onChange={this.onChange}\n                    />\n                    <Button\n                        type='submit'\n                        onClick={this.onSubmit}\n                    >\n                        Submit\n                    </Button>\n                </Form>\n\n\n          <p>DiplomaCount : {this.state.diplomaCount}</p>\n          <p>Contract address: {this.getDiplomaStorageAddress()}</p>\n          <p>Account : {this.state.account}</p>\n\n          <p><font size = '5'>Diploma</font></p>\n          <p>&emsp;&emsp;&emsp;Degree Id : {this.state.degreeId} </p>\n          <p>&emsp;&emsp;&emsp;StudentId : {this.state.studentId} </p>\n          <p>&emsp;&emsp;&emsp;Valid : {this.state.valid} </p>\n\n          \n          <p><font size = '5'> Student</font></p>\n          <p><span class=\"tabulation\">&emsp;&emsp;&emsp; INE : {this.state.INE} </span></p>\n          <p><span class=\"tabulation\">&emsp;&emsp;&emsp; First name : {this.state.fisrtName} </span></p>\n          <p><span class=\"tabulation\">&emsp;&emsp;&emsp; Last Name : {this.state.lastName} </span></p>\n          <p><span class=\"tabulation\">&emsp;&emsp;&emsp; Birth : {this.state.birth} </span></p>\n          \n          <p><font size = '5'>Degree</font></p>\n          <p>&emsp;&emsp;&emsp; Degree name : {this.state.nameDegree} </p>\n          <p>&emsp;&emsp;&emsp;schoolName : {this.state.schoolName} </p>\n          <p>&emsp;&emsp;&emsp;Year : {this.state.year} </p>\n          \n\n          <p><font size = '5'>Editors</font></p>\n          <p>&emsp;&emsp;&emsp;DiplomaEditor : {this.state.DiplomaEditor} </p>\n          <p>&emsp;&emsp;&emsp;Student Editor: {this.state.StudentEditor} </p>\n          <p>&emsp;&emsp;&emsp;DegreeEditor : {this.state.degreeEditor} </p>\n   \n        </div>\n    );\n  }\n}\n\nexport default CheckDiplomaWithId;"]},"metadata":{},"sourceType":"module"}