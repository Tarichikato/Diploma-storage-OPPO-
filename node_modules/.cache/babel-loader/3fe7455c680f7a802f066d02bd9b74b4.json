{"ast":null,"code":"var _jsxFileName = \"/home/jeanne/Diploma-storage-OPPO-/src/components/CheckStudents.js\";\nimport React, { Component } from 'react';\nimport { createContract } from './../ethereum/DiplomaStorageContract';\nimport { Button, ButtonGroup, Form, Spinner, Modal, ButtonToolbar } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\nexport class CheckStudents extends Component {\n  async componentDidMount() {\n    await this.getStudents(this.getDiplomaStorageAddress());\n  }\n\n  getDiplomaStorageAddress() {\n    return this.props.match.params.address;\n  }\n\n  async getStudents(address) {\n    const contract = createContract(address);\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(accounts);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const studentCount = await contract.methods.studentCount().call();\n    this.setState({\n      studentCount\n    });\n\n    for (var i = 1; i <= studentCount; i++) {\n      const student = await contract.methods.students(i).call();\n      this.setState({\n        students: [...this.state.students, student]\n      });\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      students: {\n        name: 'N/A',\n        idStudent: 0,\n        INE: 0,\n        fisrtName: 'N/A',\n        lastName: 'N/A',\n        birth: 0\n      }\n    };\n    this.state = {\n      account: '',\n      studentCount: 0,\n      students: [],\n      ModalShow: false\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  checkStudent(INE, firstName, lastName, birth) {\n    console.log(\"Account\", this.state.account);\n    return this.state.contract.methods.checkStudent(INE, firstName, lastName, birth).send({\n      from: this.state.account\n    });\n  }\n\n  onChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    console.log(name, value, this.state);\n    this.setState({\n      [name]: value\n    });\n    console.log(name, value, this.state);\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n\n    if (this.checkStudent(this.state.INE, this.state.firstName, this.state.lastName, this.state.birth) == 0) {\n      alert(\"Cet étudiant n'existe pas :(\");\n    } else {\n      alert(\"Cet étudiant existe !!!\");\n    }\n  }\n\n  render() {\n    let ModalClose = () => this.setState({\n      ModalShow: false\n    });\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5 text-center center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 19\n      }\n    }, \"Check Students\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, \"Rentrez les informations de l'\\xE9tudiant que vous recherchez:  \")))))), /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }, \"INE number\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the INE number\",\n      name: \"INE\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the First Name\",\n      name: \"firstName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Last Name\",\n      name: \"lastName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, \"Birthday\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Birthday\",\n      name: \"birth\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ButtonToolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.setState({\n        ModalShow: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, \"Check Students\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.onSubmitBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: this.onSubmitReload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, \"Refresh\"))))));\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back();\n  }\n\n  onSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload();\n  }\n\n}\nexport default CheckStudents;","map":{"version":3,"sources":["/home/jeanne/Diploma-storage-OPPO-/src/components/CheckStudents.js"],"names":["React","Component","createContract","Button","ButtonGroup","Form","Spinner","Modal","ButtonToolbar","web3","NavBar","CheckStudents","componentDidMount","getStudents","getDiplomaStorageAddress","props","match","params","address","contract","accounts","eth","getAccounts","setState","account","console","log","studentCount","methods","call","i","student","students","state","constructor","name","idStudent","INE","fisrtName","lastName","birth","ModalShow","onChange","bind","onSubmit","checkStudent","firstName","send","from","event","target","value","preventDefault","alert","render","ModalClose","onSubmitBack","onSubmitReload","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\nimport { createContract } from './../ethereum/DiplomaStorageContract'\nimport { Button, ButtonGroup, Form, Spinner, Modal, ButtonToolbar } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\n\n\n\n\nexport class CheckStudents extends Component {\n\n  \n\n    state = {\n        students: {\n            name:'N/A',\n            idStudent: 0,\n            INE: 0,\n            fisrtName: 'N/A',\n            lastName: 'N/A',\n            birth: 0,\n        }\n\n    }\n\n  async componentDidMount () {\n    await this.getStudents(this.getDiplomaStorageAddress()\n    )\n  }\n  \n  getDiplomaStorageAddress () {\n    return this.props.match.params.address\n  }\n\n  async getStudents(address) {\n    const contract = createContract(address)\n    const accounts = await web3.eth.getAccounts()\n    this.setState({ account: accounts[0] })\n    console.log(accounts)\n    \n    this.setState({ contract })\n    console.log(contract)\n\n    const studentCount = await contract.methods.studentCount().call()\n    this.setState({studentCount})\n\n    for (var i = 1; i <= studentCount; i++) {\n        const student = await contract.methods.students(i).call()\n        this.setState({\n          students: [...this.state.students, student]\n        })\n      }\n    \n}\n\nconstructor(props) {\n    super(props)\n    this.state = {\n      account:'',\n      studentCount: 0,\n      students: [],\n      ModalShow: false,\n    }\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n}\n\n\ncheckStudent(INE, firstName, lastName, birth) {\n    console.log(\"Account\" , this.state.account)\n    return this.state.contract.methods.checkStudent(INE, firstName, lastName, birth).send({ from: this.state.account })\n}\n\n\n    onChange(event) {\n    \n    const target = event.target;\n    const value =  target.value;\n    const name = target.name;\n    console.log(name,value,this.state) \n    this.setState({\n      [name]: value\n    });\n    console.log(name,value,this.state)  \n}\n\n\n    onSubmit(event) {\n    event.preventDefault();\n    if (this.checkStudent(this.state.INE,this.state.firstName,this.state.lastName,this.state.birth)==0){\n\talert(\"Cet étudiant n'existe pas :(\");\n    }\n    else {\n\talert(\"Cet étudiant existe !!!\");\n    }\n  }\n\n\n  render() {\n    let ModalClose =() => this.setState({ModalShow:false})\n\n    return (\n      <div>\n        <div>\n            <NavBar/>\n        </div>\n\n        <div className=\"container\">\n        <div className=\"row mt-5 text-center center\">\n            <div className=\"col-lg-10 mb-4 grid-margin\">\n              <div className=\"card h-100\">\n                  <h4 className=\"card-header\">Check Students</h4>\n                  <div className=\"card-body\">\n                    <p className=\"card-text\">Rentrez les informations de l'étudiant que vous recherchez:  </p>\n                  </div>\n              </div>\n            </div>\n        </div>    \n      </div>\n\n\n        <Form>\n            <Form.Group controlId=\"formGroupEmail\">\n                <Form.Label>INE number</Form.Label>\n                <Form.Control \n                    placeholder= 'Enter the INE number'\n                    name=\"INE\"\n                    type=\"number\"\n                    onChange={this.onChange} />\n            </Form.Group>\n            \n            <Form.Group controlId=\"formGroupPassword\">\n                <Form.Label>First Name</Form.Label>\n                <Form.Control \n                    placeholder='Enter the First Name'\n                    name=\"firstName\"\n                    type=\"text\"\n                    onChange={this.onChange} />\n            </Form.Group>\n\n            <Form.Group controlId=\"formGroupPassword\">\n                <Form.Label>Last Name</Form.Label>\n                <Form.Control \n                    placeholder= 'Enter the Last Name'\n                    name=\"lastName\"\n                    type=\"text\"\n                    onChange={this.onChange} />\n            </Form.Group>\n\n            <Form.Group controlId=\"formGroupPassword\">\n                <Form.Label>Birthday</Form.Label>\n                <Form.Control \n                    placeholder= 'Enter the Birthday'\n                    name=\"birth\"\n                    type=\"number\"\n                    onChange={this.onChange} />\n            </Form.Group>\n        </Form>\n      \n        <div>\n        \n      <ButtonToolbar>\n        <Button variant=\"primary\" \n                 onClick={() => this.setState({ModalShow: true})}\n                >Check Students\n        </Button>\n\n      </ButtonToolbar> \n\n        </div>\n\n        <div className=\"container\">\n          <div className=\"row mt-5\">\n            <div className=\"col-lg-4 mb-4 grid-margin\">\n          <ButtonGroup size=\"lg\" >\n                <Button variant=\"primary\" \n                    onClick={this.onSubmitBack}\n                    >Back\n                </Button>\n                <Button variant=\"light\" \n                    onClick={this.onSubmitReload}\n                    >Refresh\n                </Button>\n          </ButtonGroup>\n        </div>\n      </div>\n    </div> \n            \n      </div>\n    );\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back()\n    }\n\n    onSubmitReload(event) {\n        event.preventDefault();\n        window.location.reload()\n    }\n}\n\nexport default CheckStudents;\n"]},"metadata":{},"sourceType":"module"}