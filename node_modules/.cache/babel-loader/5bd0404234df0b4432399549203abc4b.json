{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{createContract}from'./../ethereum/DiplomaStorageContract';import{ButtonGroup,Button}from'react-bootstrap';import{web3}from'./../ethereum/web3';import NavBar from'./../assets/NavBar';export var RenderDiplomas=/*#__PURE__*/function(_Component){_inherits(RenderDiplomas,_Component);var _super=_createSuper(RenderDiplomas);_createClass(RenderDiplomas,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.getDiplomas(this.getDiplomaStorageAddress());case 2:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"getDiplomaStorageAddress\",value:function getDiplomaStorageAddress(){return this.props.match.params.address;}},{key:\"getDiplomas\",value:function(){var _getDiplomas=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(address){var contract,accounts,diplomaCount,i,diploma;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:contract=createContract(address);_context2.next=3;return web3.eth.getAccounts();case 3:accounts=_context2.sent;this.setState({account:accounts[0]});console.log(accounts);this.setState({contract:contract});console.log(contract);_context2.next=10;return contract.methods.diplomaCount().call();case 10:diplomaCount=_context2.sent;this.setState({diplomaCount:diplomaCount});console.log(diplomaCount);i=1;case 14:if(!(i<=diplomaCount)){_context2.next=23;break;}_context2.next=17;return contract.methods.diplomas(i).call();case 17:diploma=_context2.sent;this.setState({diplomas:[].concat(_toConsumableArray(this.state.diplomas),[diploma])});console.log(diploma);case 20:i++;_context2.next=14;break;case 23:case\"end\":return _context2.stop();}}},_callee2,this);}));function getDiplomas(_x){return _getDiplomas.apply(this,arguments);}return getDiplomas;}()}]);function RenderDiplomas(props){var _this;_classCallCheck(this,RenderDiplomas);_this=_super.call(this,props);_this.state={diplomas:{id:0,idDegree:0,idStudent:0}};_this.state={account:'',diplomaCount:0,diplomas:[]};return _this;}_createClass(RenderDiplomas,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(NavBar,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5 text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-10 mb-4 grid-margin\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card h-100\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-header\"},\"All the Diplomas are here below\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},\"Voici la liste des diplomes enregistr\\xE9s sur la blockchain. \")))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"#\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"idDegree\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"idStudent\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},this.state.diplomas.map(function(diploma,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,diploma.id));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.diplomas.map(function(diploma,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,diploma.idDegree));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.diplomas.map(function(diploma,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,diploma.iStudent));}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(ButtonGroup,{size:\"lg\"},/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:this.onSubmitBack},\"Back\"),/*#__PURE__*/React.createElement(Button,{variant:\"light\",onClick:this.onSubmitReload},\"Refresh\")))));}},{key:\"onSubmitBack\",value:function onSubmitBack(event){event.preventDefault();window.history.back();}},{key:\"onSubmitReload\",value:function onSubmitReload(event){event.preventDefault();window.location.reload();}}]);return RenderDiplomas;}(Component);export default RenderDiplomas;","map":{"version":3,"sources":["C:/Users/francesca/Desktop/Code SmartContract/react-boost-test/src/components/RenderDiplomas.js"],"names":["React","Component","createContract","ButtonGroup","Button","web3","NavBar","RenderDiplomas","getDiplomas","getDiplomaStorageAddress","props","match","params","address","contract","eth","getAccounts","accounts","setState","account","console","log","methods","diplomaCount","call","i","diplomas","diploma","state","id","idDegree","idStudent","map","key","iStudent","onSubmitBack","onSubmitReload","event","preventDefault","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\r\nimport { createContract } from './../ethereum/DiplomaStorageContract'\r\nimport { ButtonGroup, Button } from 'react-bootstrap';\r\nimport { web3 } from './../ethereum/web3';\r\nimport NavBar from './../assets/NavBar';\r\n\r\n\r\n\r\n\r\nexport class RenderDiplomas extends Component {\r\n\r\n    state = {\r\n        diplomas: {\r\n            id: 0,\r\n            idDegree: 0,\r\n            idStudent: 0,\r\n        }\r\n\r\n    }\r\n\r\n  async componentDidMount () {\r\n    await this.getDiplomas(this.getDiplomaStorageAddress()\r\n    )\r\n  }\r\n  \r\n  getDiplomaStorageAddress () {\r\n    return this.props.match.params.address\r\n  }\r\n\r\n  async getDiplomas(address) {\r\n    const contract = createContract(address)\r\n    const accounts = await web3.eth.getAccounts()\r\n    this.setState({ account: accounts[0] })\r\n    console.log(accounts)\r\n    \r\n    this.setState({ contract })\r\n    console.log(contract)\r\n\r\n    const diplomaCount = await contract.methods.diplomaCount().call()\r\n    this.setState({diplomaCount})\r\n    console.log(diplomaCount)\r\n\r\n    for (var i = 1; i <= diplomaCount; i++) {\r\n        const diploma = await contract.methods.diplomas(i).call()\r\n        this.setState({\r\n          diplomas: [...this.state.diplomas, diploma]\r\n        })\r\n        console.log(diploma)\r\n      }\r\n    \r\n}\r\n\r\nconstructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      account:'',\r\n      diplomaCount: 0,\r\n      diplomas: [],\r\n    }\r\n}\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n          <header>\r\n              <NavBar/>\r\n          </header>\r\n\r\n          <div className=\"container\">\r\n           <div className=\"row mt-5 text-center\">\r\n            <div className=\"col-lg-10 mb-4 grid-margin\">\r\n              <div className=\"card h-100\">\r\n                  <h4 className=\"card-header\">All the Diplomas are here below</h4>\r\n                  <div className=\"card-body\">\r\n                    <p className=\"card-text\">Voici la liste des diplomes enregistrés sur la blockchain. </p>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n        </div>    \r\n      </div>\r\n          \r\n            \r\n      <div>\r\n     <table className=\"table\">\r\n      <thead className=\"thead-dark\">\r\n    <tr>\r\n      <th scope=\"col\">#</th>\r\n      <th scope=\"col\">idDegree</th>\r\n      <th scope=\"col\">idStudent</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n    <th scope=\"row\">\r\n          { this.state.diplomas.map((diploma, key) => {\r\n            return(\r\n              \r\n              <div key={key}>\r\n                <td>\r\n                  {diploma.id}\r\n                </td>\r\n              </div>\r\n              \r\n             )\r\n          })}\r\n      </th>\r\n\r\n    <td>\r\n      { this.state.diplomas.map((diploma, key) => {\r\n            return(\r\n              \r\n              <div key={key}>\r\n                <td>\r\n                  {diploma.idDegree}\r\n                </td>\r\n              </div> \r\n              \r\n                 )\r\n        })}\r\n    </td> \r\n\r\n    <td> \r\n      { this.state.diplomas.map((diploma, key) => {\r\n            return(\r\n              <div key={key}>\r\n                <td>\r\n                  {diploma.iStudent}\r\n              </td>\r\n            </div> \r\n              \r\n                 )\r\n        })}\r\n    </td>  \r\n      \r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n\r\n    <div className=\"container\">\r\n          <ButtonGroup size=\"lg\" >\r\n                <Button variant=\"primary\" \r\n                    onClick={this.onSubmitBack}\r\n                    >Back\r\n                </Button>\r\n                <Button variant=\"light\" \r\n                    onClick={this.onSubmitReload}\r\n                    >Refresh\r\n                </Button>\r\n          </ButtonGroup>\r\n    </div> \r\n                  \r\n  </div>  \r\n      \r\n</div>\r\n    );\r\n  }\r\n\r\n  onSubmitBack(event) {\r\n    event.preventDefault();\r\n    window.history.back()\r\n}\r\n\r\nonSubmitReload(event) {\r\n    event.preventDefault();\r\n    window.location.reload()\r\n}\r\n}\r\n\r\nexport default RenderDiplomas;"]},"metadata":{},"sourceType":"module"}