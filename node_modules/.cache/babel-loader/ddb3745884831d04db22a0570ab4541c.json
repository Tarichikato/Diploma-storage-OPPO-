{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/getDiplomas.js\";\nimport React, { Component } from 'react';\nimport { createContract } from './../ethereum/DiplomaStorageContract';\nimport { ButtonGroup, Button, Form, ButtonToolbar } from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\nexport class getDiplomas extends Component {\n  async componentDidMount() {\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n  }\n\n  getDiplomaStorageAddress() {\n    return this.props.match.params.address;\n  }\n\n  async getDiplomas(address) {\n    const contract = createContract(address);\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(accounts);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const diplomaCount = await contract.methods.diplomaCount().call();\n    this.setState({\n      diplomaCount\n    });\n    console.log(diplomaCount);\n\n    for (var i = 1; i <= diplomaCount; i++) {\n      const dip = await contract.methods.diplomas(i).call();\n\n      if (dip.idStudent == this.state.idS) {\n        const diploma = await contract.methods.degrees(dip.idDegree).call();\n        this.setState({\n          diplomas: [...this.state.diplomas, diploma]\n        });\n      }\n\n      console.log(dip);\n    }\n  }\n\n  async setId() {\n    const id = await this.state.contract.methods.checkStudent(this.state.INE, this.state.firstName, this.state.lastName, this.state.birth).call();\n    console.log(id, 'setId');\n    this.setState({\n      idS: id\n    });\n  }\n\n  async onSubmitGetId(event) {\n    event.preventDefault();\n    await this.setId();\n    console.log(this.state.idS);\n    await this.getDiplomas(this.getDiplomaStorageAddress());\n  }\n\n  onChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    console.log(name, value, this.state);\n    this.setState({\n      [name]: value\n    });\n    console.log(name, value, this.state);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      diplomas: {\n        id: 0,\n        idDegree: 0,\n        idStudent: 0\n      },\n      idS: 0,\n      contract: '',\n      INE: 0,\n      firstName: '',\n      lastName: '',\n      birth: ''\n    };\n    this.state = {\n      account: '',\n      diplomaCount: 0,\n      diplomas: []\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmitGetId = this.onSubmitGetId.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 19\n      }\n    }, \"All the Diplomas are here below\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, \"Voici la liste des diplomes enregistr\\xE9s sur la blockchain. \")))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, \"INE number\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the INE number\",\n      name: \"INE\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the First Name\",\n      name: \"firstName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Last Name\",\n      name: \"lastName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }, \"Birthday\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Birthday\",\n      name: \"birth\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(ButtonToolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.onSubmitGetId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 7\n      }\n    }, \"Check Student\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }\n    }, \"Editor\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }\n    }, \"School Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }, \"idSchool\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 5\n      }\n    }, this.state.diplomas.map((diploma, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }, diploma.editor));\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 5\n      }\n    }, this.state.diplomas.map((diploma, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 17\n        }\n      }, diploma.name));\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 5\n      }\n    }, this.state.diplomas.map((diploma, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }\n      }, diploma.schoolName));\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.onSubmitBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: this.onSubmitReload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }\n    }, \"Refresh\")))));\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back();\n  }\n\n  onSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload();\n  }\n\n}\nexport default getDiplomas;","map":{"version":3,"sources":["/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/getDiplomas.js"],"names":["React","Component","createContract","ButtonGroup","Button","Form","ButtonToolbar","web3","NavBar","getDiplomas","componentDidMount","contract","getDiplomaStorageAddress","setState","props","match","params","address","accounts","eth","getAccounts","account","console","log","diplomaCount","methods","call","i","dip","diplomas","idStudent","state","idS","diploma","degrees","idDegree","setId","id","checkStudent","INE","firstName","lastName","birth","onSubmitGetId","event","preventDefault","onChange","target","value","name","constructor","bind","render","map","key","editor","schoolName","onSubmitBack","onSubmitReload","window","history","back","location","reload"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAkC,OAAlC;AACA,SAASC,cAAT,QAA+B,sCAA/B;AACA,SAASC,WAAT,EAAsBC,MAAtB,EAA6BC,IAA7B,EAAmCC,aAAnC,QAAuD,iBAAvD;AACA,SAASC,IAAT,QAAqB,oBAArB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AAKA,OAAO,MAAMC,WAAN,SAA0BR,SAA1B,CAAoC;AAoBzC,QAAMS,iBAAN,GAA2B;AACzB,UAAMC,QAAQ,GAAGT,cAAc,CAAC,KAAKU,wBAAL,EAAD,CAA/B;AACA,SAAKC,QAAL,CAAc;AAACF,MAAAA;AAAD,KAAd;AAED;;AAEDC,EAAAA,wBAAwB,GAAI;AAC1B,WAAO,KAAKE,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,OAA/B;AACD;;AAED,QAAMR,WAAN,CAAkBQ,OAAlB,EAA2B;AACzB,UAAMN,QAAQ,GAAGT,cAAc,CAACe,OAAD,CAA/B;AACA,UAAMC,QAAQ,GAAG,MAAMX,IAAI,CAACY,GAAL,CAASC,WAAT,EAAvB;AACA,SAAKP,QAAL,CAAc;AAAEQ,MAAAA,OAAO,EAAEH,QAAQ,CAAC,CAAD;AAAnB,KAAd;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AAEA,SAAKL,QAAL,CAAc;AAAEF,MAAAA;AAAF,KAAd;AACAW,IAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAZ;AAEA,UAAMa,YAAY,GAAG,MAAMb,QAAQ,CAACc,OAAT,CAAiBD,YAAjB,GAAgCE,IAAhC,EAA3B;AACA,SAAKb,QAAL,CAAc;AAACW,MAAAA;AAAD,KAAd;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYC,YAAZ;;AAEA,SAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIH,YAArB,EAAmCG,CAAC,EAApC,EAAwC;AACpC,YAAMC,GAAG,GAAG,MAAMjB,QAAQ,CAACc,OAAT,CAAiBI,QAAjB,CAA0BF,CAA1B,EAA6BD,IAA7B,EAAlB;;AACA,UAAGE,GAAG,CAACE,SAAJ,IAAiB,KAAKC,KAAL,CAAWC,GAA/B,EAAmC;AAC/B,cAAMC,OAAO,GAAE,MAAMtB,QAAQ,CAACc,OAAT,CAAiBS,OAAjB,CAAyBN,GAAG,CAACO,QAA7B,EAAuCT,IAAvC,EAArB;AACJ,aAAKb,QAAL,CAAc;AACZgB,UAAAA,QAAQ,EAAE,CAAC,GAAG,KAAKE,KAAL,CAAWF,QAAf,EAAyBI,OAAzB;AADE,SAAd;AAGH;;AACGX,MAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACD;AAGN;;AACG,QAAMQ,KAAN,GAAa;AACT,UAAMC,EAAE,GAAG,MAAM,KAAKN,KAAL,CAAWpB,QAAX,CAAoBc,OAApB,CAA4Ba,YAA5B,CAAyC,KAAKP,KAAL,CAAWQ,GAApD,EAAwD,KAAKR,KAAL,CAAWS,SAAnE,EAA6E,KAAKT,KAAL,CAAWU,QAAxF,EAAiG,KAAKV,KAAL,CAAWW,KAA5G,EAAmHhB,IAAnH,EAAjB;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYc,EAAZ,EAAgB,OAAhB;AACA,SAAKxB,QAAL,CAAc;AAACmB,MAAAA,GAAG,EAAEK;AAAN,KAAd;AACH;;AAEL,QAAMM,aAAN,CAAoBC,KAApB,EAA2B;AACvBA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAM,KAAKT,KAAL,EAAN;AACAd,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKQ,KAAL,CAAWC,GAAvB;AACA,UAAM,KAAKvB,WAAL,CAAiB,KAAKG,wBAAL,EAAjB,CAAN;AACD;;AAEDkC,EAAAA,QAAQ,CAACF,KAAD,EAAQ;AAEd,UAAMG,MAAM,GAAGH,KAAK,CAACG,MAArB;AACA,UAAMC,KAAK,GAAID,MAAM,CAACC,KAAtB;AACA,UAAMC,IAAI,GAAGF,MAAM,CAACE,IAApB;AACA3B,IAAAA,OAAO,CAACC,GAAR,CAAY0B,IAAZ,EAAiBD,KAAjB,EAAuB,KAAKjB,KAA5B;AACA,SAAKlB,QAAL,CAAc;AACZ,OAACoC,IAAD,GAAQD;AADI,KAAd;AAGA1B,IAAAA,OAAO,CAACC,GAAR,CAAY0B,IAAZ,EAAiBD,KAAjB,EAAuB,KAAKjB,KAA5B;AACH;;AAEDmB,EAAAA,WAAW,CAACpC,KAAD,EAAQ;AACf,UAAMA,KAAN;AADe,SA/EfiB,KA+Ee,GA/EP;AACJF,MAAAA,QAAQ,EAAE;AACNQ,QAAAA,EAAE,EAAE,CADE;AAENF,QAAAA,QAAQ,EAAE,CAFJ;AAGNL,QAAAA,SAAS,EAAE;AAHL,OADN;AAOJE,MAAAA,GAAG,EAAE,CAPD;AAQNrB,MAAAA,QAAQ,EAAC,EARH;AASN4B,MAAAA,GAAG,EAAE,CATC;AAUNC,MAAAA,SAAS,EAAE,EAVL;AAWNC,MAAAA,QAAQ,EAAE,EAXJ;AAYNC,MAAAA,KAAK,EAAE;AAZD,KA+EO;AAEf,SAAKX,KAAL,GAAa;AACXV,MAAAA,OAAO,EAAC,EADG;AAEXG,MAAAA,YAAY,EAAE,CAFH;AAGXK,MAAAA,QAAQ,EAAE;AAHC,KAAb;AAKA,SAAKiB,QAAL,GAAgB,KAAKA,QAAL,CAAcK,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKR,aAAL,GAAqB,KAAKA,aAAL,CAAmBQ,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AAICC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAKI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wEADF,CAFJ,CADF,CADD,CADD,CALJ,eAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,SAAS,EAAC,gBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,oBAAC,IAAD,CAAM,OAAN;AACI,MAAA,WAAW,EAAE,sBADjB;AAEI,MAAA,IAAI,EAAC,KAFT;AAGI,MAAA,IAAI,EAAC,QAHT;AAII,MAAA,QAAQ,EAAE,KAAKN,QAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,eAUI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,SAAS,EAAC,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,oBAAC,IAAD,CAAM,OAAN;AACI,MAAA,WAAW,EAAC,sBADhB;AAEI,MAAA,IAAI,EAAC,WAFT;AAGI,MAAA,IAAI,EAAC,MAHT;AAII,MAAA,QAAQ,EAAE,KAAKA,QAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAVJ,eAmBI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,SAAS,EAAC,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,eAEI,oBAAC,IAAD,CAAM,OAAN;AACI,MAAA,WAAW,EAAE,qBADjB;AAEI,MAAA,IAAI,EAAC,UAFT;AAGI,MAAA,IAAI,EAAC,MAHT;AAII,MAAA,QAAQ,EAAE,KAAKA,QAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAnBJ,eA4BI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,SAAS,EAAC,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,oBAAC,IAAD,CAAM,OAAN;AACI,MAAA,WAAW,EAAE,oBADjB;AAEI,MAAA,IAAI,EAAC,OAFT;AAGI,MAAA,IAAI,EAAC,QAHT;AAII,MAAA,QAAQ,EAAE,KAAKA,QAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CA5BJ,CADA,eAuCA,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,SAAhB;AACE,MAAA,OAAO,EAAE,KAAKH,aADhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADA,CAvCA,CAlBA,eAsEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACD;AAAO,MAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAO,MAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,eAEE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,eAIE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJF,eAKE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,eAME;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,CADA,CADD,eAWH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ,KAAKZ,KAAL,CAAWF,QAAX,CAAoBwB,GAApB,CAAwB,CAACpB,OAAD,EAAUqB,GAAV,KAAkB;AAC1C,0BAEE;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGrB,OAAO,CAACsB,MADX,CADF,CAFF;AASD,KAVC,CADR,CADA,eAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,KAAKxB,KAAL,CAAWF,QAAX,CAAoBwB,GAApB,CAAwB,CAACpB,OAAD,EAAUqB,GAAV,KAAkB;AACtC,0BAEE;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGrB,OAAO,CAACgB,IADX,CADF,CAFF;AASH,KAVD,CADJ,CAfA,eA6BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,KAAKlB,KAAL,CAAWF,QAAX,CAAoBwB,GAApB,CAAwB,CAACpB,OAAD,EAAUqB,GAAV,KAAkB;AACtC,0BACE;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGrB,OAAO,CAACuB,UADX,CADF,CADF;AAQH,KATD,CADJ,CA7BA,CADF,CAXG,CADC,eA8DF;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACM,oBAAC,WAAD;AAAa,MAAA,IAAI,EAAC,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACM,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,SAAhB;AACI,MAAA,OAAO,EAAE,KAAKC,YADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADN,eAKM,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,OAAhB;AACI,MAAA,OAAO,EAAE,KAAKC,cADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALN,CADN,CA9DE,CAtEA,CADF;AAsJD;;AAEDD,EAAAA,YAAY,CAACb,KAAD,EAAQ;AAClBA,IAAAA,KAAK,CAACC,cAAN;AACAc,IAAAA,MAAM,CAACC,OAAP,CAAeC,IAAf;AACH;;AAEDH,EAAAA,cAAc,CAACd,KAAD,EAAQ;AAClBA,IAAAA,KAAK,CAACC,cAAN;AACAc,IAAAA,MAAM,CAACG,QAAP,CAAgBC,MAAhB;AACH;;AA/P0C;AAkQ3C,eAAetD,WAAf","sourcesContent":["import React, { Component }  from 'react'\nimport { createContract } from './../ethereum/DiplomaStorageContract'\nimport { ButtonGroup, Button,Form ,ButtonToolbar} from 'react-bootstrap';\nimport { web3 } from './../ethereum/web3';\nimport NavBar from './../assets/NavBar';\n\n\n\n\nexport class getDiplomas extends Component {\n\n    state = {\n        diplomas: {\n            id: 0,\n            idDegree: 0,\n            idStudent: 0,\n        },\n        \n        idS: 0,\n      contract:'',\n      INE: 0,\n      firstName: '',\n      lastName: '',\n      birth: ''\n\n\n\n    }\n\n  async componentDidMount () {\n    const contract = createContract(this.getDiplomaStorageAddress ())\n    this.setState({contract})\n    \n  }\n  \n  getDiplomaStorageAddress () {\n    return this.props.match.params.address\n  }\n\n  async getDiplomas(address) {\n    const contract = createContract(address)\n    const accounts = await web3.eth.getAccounts()\n    this.setState({ account: accounts[0] })\n    console.log(accounts)\n    \n    this.setState({ contract })\n    console.log(contract)\n\n    const diplomaCount = await contract.methods.diplomaCount().call()\n    this.setState({diplomaCount})\n    console.log(diplomaCount)\n\n    for (var i = 1; i <= diplomaCount; i++) {\n        const dip = await contract.methods.diplomas(i).call()\n        if(dip.idStudent == this.state.idS){\n            const diploma= await contract.methods.degrees(dip.idDegree).call()\n        this.setState({\n          diplomas: [...this.state.diplomas, diploma]\n        })\n    }\n        console.log(dip)\n      }\n\n    \n}\n    async setId(){\n        const id = await this.state.contract.methods.checkStudent(this.state.INE,this.state.firstName,this.state.lastName,this.state.birth).call()\n        console.log(id, 'setId')\n        this.setState({idS: id})\n    }\n\nasync onSubmitGetId(event) {\n    event.preventDefault();\n    await this.setId()\n    console.log(this.state.idS)\n    await this.getDiplomas(this.getDiplomaStorageAddress())\n  }\n\n  onChange(event) {\n\n    const target = event.target;\n    const value =  target.value;\n    const name = target.name;\n    console.log(name,value,this.state)\n    this.setState({\n      [name]: value\n    });\n    console.log(name,value,this.state)\n}\n\nconstructor(props) {\n    super(props)\n    this.state = {\n      account:'',\n      diplomaCount: 0,\n      diplomas: [],\n    }\n    this.onChange = this.onChange.bind(this);\n    this.onSubmitGetId = this.onSubmitGetId.bind(this);\n}\n\n\n\n  render() {\n    return (\n      <div>\n          <header>\n              <NavBar/>\n          </header>\n\n          <div className=\"container\">\n           <div className=\"row mt-5 text-center\">\n            <div className=\"col-lg-10 mb-4 grid-margin\">\n              <div className=\"card h-100\">\n                  <h4 className=\"card-header\">All the Diplomas are here below</h4>\n                  <div className=\"card-body\">\n                    <p className=\"card-text\">Voici la liste des diplomes enregistrés sur la blockchain. </p>\n                  </div>\n              </div>\n            </div>\n        </div>    \n      </div>\n\n      <div>\n      <Form>\n          <Form.Group controlId=\"formGroupEmail\">\n              <Form.Label>INE number</Form.Label>\n              <Form.Control \n                  placeholder= 'Enter the INE number'\n                  name=\"INE\"\n                  type=\"number\"\n                  onChange={this.onChange} />\n          </Form.Group>\n          \n          <Form.Group controlId=\"formGroupPassword\">\n              <Form.Label>First Name</Form.Label>\n              <Form.Control \n                  placeholder='Enter the First Name'\n                  name=\"firstName\"\n                  type=\"text\"\n                  onChange={this.onChange} />\n          </Form.Group>\n\n          <Form.Group controlId=\"formGroupPassword\">\n              <Form.Label>Last Name</Form.Label>\n              <Form.Control \n                  placeholder= 'Enter the Last Name'\n                  name=\"lastName\"\n                  type=\"text\"\n                  onChange={this.onChange} />\n          </Form.Group>\n\n          <Form.Group controlId=\"formGroupPassword\">\n              <Form.Label>Birthday</Form.Label>\n              <Form.Control \n                  placeholder= 'Enter the Birthday'\n                  name=\"birth\"\n                  type=\"number\"\n                  onChange={this.onChange} />\n          </Form.Group>\n      </Form>\n\n      <ButtonToolbar>\n      <Button variant=\"primary\" \n        onClick={this.onSubmitGetId}\n        >Check Student\n      </Button>\n          \n        \n\n    </ButtonToolbar> \n      \n      </div>\n          \n            \n      <div>\n     <table className=\"table\">\n      <thead className=\"thead-dark\">\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Editor</th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">School Name</th>\n        <th scope=\"col\">Year</th>\n        <th scope=\"col\">idSchool</th>\n        </tr>\n  </thead>\n  <tbody>\n    <tr>\n    <th scope=\"row\">\n          { this.state.diplomas.map((diploma, key) => {\n            return(\n              \n              <div key={key}>\n                <td>\n                  {diploma.editor}\n                </td>\n              </div>\n              \n             )\n          })}\n      </th>\n\n    <td>\n      { this.state.diplomas.map((diploma, key) => {\n            return(\n              \n              <div key={key}>\n                <td>\n                  {diploma.name}\n                </td>\n              </div> \n              \n                 )\n        })}\n    </td> \n\n    <td> \n      { this.state.diplomas.map((diploma, key) => {\n            return(\n              <div key={key}>\n                <td>\n                  {diploma.schoolName}\n              </td>\n            </div> \n              \n                 )\n        })}\n    </td>\n\n    \n      \n    </tr>\n  </tbody>\n</table>\n\n\n    <div className=\"container\">\n          <ButtonGroup size=\"lg\" >\n                <Button variant=\"primary\" \n                    onClick={this.onSubmitBack}\n                    >Back\n                </Button>\n                <Button variant=\"light\" \n                    onClick={this.onSubmitReload}\n                    >Refresh\n                </Button>\n          </ButtonGroup>\n    </div> \n                  \n  </div>  \n      \n</div>\n    );\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back()\n}\n\nonSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload()\n}\n}\n\nexport default getDiplomas;"]},"metadata":{},"sourceType":"module"}