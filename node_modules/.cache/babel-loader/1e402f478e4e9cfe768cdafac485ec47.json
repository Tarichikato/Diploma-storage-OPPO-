{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/CheckStudents.js\";\nimport React, { Component } from 'react';\nimport { createContract } from '../ethereum/DiplomaStorageContract';\nimport { Table } from 'semantic-ui-react';\nimport { web3 } from './../ethereum/web3';\nimport { Header, Checkbox } from 'semantic-ui-react';\nimport { Button, ButtonGroup, Form, Spinner, Modal, ButtonToolbar } from 'react-bootstrap';\nimport NavBar from './../assets/NavBar';\nimport { PopupCheckStudent } from './../assets/PopupCheckStudent';\nexport class CheckStudents extends Component {\n  async componentDidMount() {\n    console.log('this.props.match.params.address', this.props.match.params.address);\n    this.loadBcData();\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    console.log(\"contrat\", contract);\n    this.getContractState(contract);\n    await this.getStudent(this.getDiplomaStorageAddress(), this.state.id);\n  }\n\n  async getStudentId(INE, firstName, lastName, birth) {\n    const contract = createContract(this.getDiplomaStorageAddress());\n    const id = await contract.methods.checkStudent(INE, firstName, lastName, birth).call();\n    this.setState({\n      id\n    });\n    console.log('id', id);\n    return id;\n  }\n\n  async getContractState(contract) {\n    this.setState({\n      loading: true\n    });\n    const master = contract.methods.master().call();\n    console.log('master');\n    const studentCount = await contract.methods.studentCount().call();\n    this.setState({\n      studentCount: studentCount\n    });\n    console.log('studentCount GCS', studentCount);\n  }\n\n  async loadBcData() {\n    const accounts = await web3.eth.getAccounts();\n    console.log(\"account\", accounts[0]);\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(\"addresseContrat\", this.getDiplomaStorageAddress());\n    const contract = createContract(this.getDiplomaStorageAddress());\n    const studentCount = await this.state.contract.methods.studentCount().call();\n    this.setState({\n      studentCount: studentCount\n    });\n    console.log('contract', contract);\n    console.log('SC', studentCount);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      gotIt: \"\",\n      INE: 0,\n      firstName: '',\n      lastName: '',\n      birth: 0,\n      id: 0,\n      students: {\n        id: 0,\n        INE: 0,\n        fisrtName: '',\n        lastName: '',\n        birth: 0\n      },\n      answer: '',\n      student: '',\n      ModalShow: false\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      contract: createContract(this.getDiplomaStorageAddress()),\n      INE: 0,\n      firstName: '',\n      lastName: '',\n      birth: 0,\n      id: 0,\n      account: '',\n      studentCount: 0,\n      students: [],\n      answer: '',\n      student: '',\n      infos: ''\n    };\n  }\n\n  getDiplomaStorageAddress() {\n    return this.props.match.params.address;\n  }\n\n  async getStudent(address, id) {\n    const contract = createContract(address);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const student = await contract.methods.students(id).call();\n    this.setState({\n      students: [student]\n    });\n    this.setState({\n      student,\n      student\n    });\n    console.log(\"students\", this.state.students);\n    console.log(\"student\", this.state.student);\n    const studentCount = await contract.methods.studentCount().call();\n    this.setState({\n      studentCount\n    });\n  }\n\n  async onChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    await this.setState({\n      [name]: value\n    });\n    console.log(name, value, this.state);\n  }\n\n  async onSubmit(event) {\n    const infos = this.state.firstName.concat(' ', this.state.lastName).concat(' né le ', this.state.birth);\n    this.setState({\n      infos\n    });\n    const contract = createContract(this.getDiplomaStorageAddress());\n    event.preventDefault();\n    const id = await this.getStudentId(this.state.INE, this.state.firstName, this.state.lastName, this.state.birth);\n    console.log('idf', id);\n\n    if (id > 0) {\n      this.setState({\n        answer: \" Est inscrit dans la Blockchain Ethereum\"\n      });\n    } else {\n      this.setState({\n        answer: \" N'est pas inscrit\"\n      });\n    }\n\n    console.log('answer', this.state.answer, this.state.student);\n    await this.getStudent(this.getDiplomaStorageAddress(), parseInt(id));\n  }\n\n  render() {\n    let ModalClose = () => this.setState({\n      ModalShow: false\n    });\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5 text-center center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, \"Check Student\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    }, \"Rentrez les informations de l'\\xE9tudiant dont vous voulez v\\xE9rifier l'existance:  \")))))), /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }, \"INE number\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the INE number\",\n      name: \"INE\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the First Name\",\n      name: \"firstName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Last Name\",\n      name: \"lastName\",\n      type: \"text\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formGroupPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 15\n      }\n    }, \"Birthday\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter the Birthday\",\n      name: \"birth\",\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ButtonToolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.setState({\n        ModalShow: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 7\n      }\n    }, \"Check Student\"), /*#__PURE__*/React.createElement(PopupCheckStudent, {\n      show: this.state.ModalShow,\n      onHide: ModalClose,\n      onSubmit: this.onSubmit,\n      answer: this.state.answer,\n      firstName: this.state.infos,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 mb-4 grid-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.onSubmitBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 15\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: this.onSubmitReload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 15\n      }\n    }, \"Refresh\"))))));\n  }\n\n  onSubmitBack(event) {\n    event.preventDefault();\n    window.history.back();\n  }\n\n  onSubmitReload(event) {\n    event.preventDefault();\n    window.location.reload();\n  }\n\n}\nexport default CheckStudents;","map":{"version":3,"sources":["/home/ubuntu/Documents/BC_Projects/Diploma-storage-OPPO-/src/components/CheckStudents.js"],"names":["React","Component","createContract","Table","web3","Header","Checkbox","Button","ButtonGroup","Form","Spinner","Modal","ButtonToolbar","NavBar","PopupCheckStudent","CheckStudents","componentDidMount","console","log","props","match","params","address","loadBcData","contract","getDiplomaStorageAddress","setState","getContractState","getStudent","state","id","getStudentId","INE","firstName","lastName","birth","methods","checkStudent","call","loading","master","studentCount","accounts","eth","getAccounts","account","constructor","gotIt","students","fisrtName","answer","student","ModalShow","onChange","bind","onSubmit","infos","event","target","value","name","concat","preventDefault","parseInt","render","ModalClose","onSubmitBack","onSubmitReload","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\r\nimport { createContract } from '../ethereum/DiplomaStorageContract'\r\nimport { Table } from 'semantic-ui-react'\r\nimport { web3 } from './../ethereum/web3';\r\nimport { Header, Checkbox} from 'semantic-ui-react';\r\nimport { Button, ButtonGroup, Form, Spinner, Modal, ButtonToolbar } from 'react-bootstrap';\r\nimport NavBar from './../assets/NavBar';\r\nimport { PopupCheckStudent } from './../assets/PopupCheckStudent';\r\n\r\n\r\n\r\n\r\n\r\nexport class CheckStudents extends Component {\r\n\r\n\r\n    state = {\r\n        gotIt: \"\",\r\n        INE: 0,\r\n        firstName: '',\r\n        lastName: '',\r\n        birth: 0,\r\n        id: 0,\r\n        students: {\r\n            id: 0,\r\n            INE: 0,\r\n            fisrtName: '',\r\n            lastName: '',\r\n            birth: 0,\r\n        },\r\n        answer:'',\r\n        student:'',\r\n        ModalShow: false,\r\n\r\n    }\r\n\r\n  async componentDidMount () {\r\n    console.log('this.props.match.params.address',this.props.match.params.address)\r\n    this.loadBcData()\r\n    const contract = createContract(this.getDiplomaStorageAddress())\r\n    this.setState({contract})\r\n    console.log(\"contrat\",contract)\r\n    this.getContractState(contract)\r\n    await this.getStudent(this.getDiplomaStorageAddress(),this.state.id)\r\n  }\r\n\r\n  async getStudentId(INE,firstName,lastName,birth){\r\n    const contract = createContract(this.getDiplomaStorageAddress())\r\n    const id = await contract.methods.checkStudent(INE,firstName,lastName,birth).call()\r\n    this.setState({id})\r\n    console.log('id',id)\r\n    return(id)\r\n  }\r\n\r\n  async getContractState(contract){\r\n    this.setState({loading:true})\r\n    const master = contract.methods.master().call()\r\n    console.log('master')\r\n    const studentCount = await contract.methods.studentCount().call()\r\n    this.setState({studentCount: studentCount})\r\n    console.log('studentCount GCS',studentCount)\r\n  }\r\n\r\n  async loadBcData(){\r\n    const accounts = await web3.eth.getAccounts()\r\n    console.log(\"account\", accounts[0])\r\n    this.setState({account: accounts[0]})\r\n    console.log(\"addresseContrat\",this.getDiplomaStorageAddress())\r\n\r\n    const contract = createContract(this.getDiplomaStorageAddress())\r\n    const studentCount = await this.state.contract.methods.studentCount().call()\r\n    this.setState({studentCount: studentCount})\r\n    console.log('contract',contract)\r\n    console.log('SC',studentCount)\r\n  }\r\n \r\n  constructor(props) {\r\n    super(props)\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n    this.state = {\r\n      contract: createContract(this.getDiplomaStorageAddress()),\r\n      INE: 0,\r\n      firstName: '',\r\n      lastName: '',\r\n      birth: 0,\r\n      id : 0,\r\n      account: '',\r\n      studentCount: 0,\r\n      students: [],\r\n      answer:'',\r\n      student:'',\r\n      infos: ''\r\n\r\n      \r\n    }\r\n  }\r\n  \r\n  \r\n  getDiplomaStorageAddress () {\r\n    return this.props.match.params.address\r\n  }\r\n\r\n  async getStudent(address,id) {\r\n    const contract = createContract(address)\r\n    \r\n    this.setState({ contract })\r\n    console.log(contract)\r\n\r\n    const student = await contract.methods.students(id).call()\r\n    this.setState({\r\n        students: [student]\r\n    })\r\n    this.setState({student,student})\r\n    console.log(\"students\", this.state.students)\r\n    console.log(\"student\", this.state.student)\r\n\r\n    const studentCount = await contract.methods.studentCount().call()\r\n    this.setState({studentCount})\r\n  }\r\n\r\n  \r\n\r\n\r\n\r\n  async onChange(event) {\r\n    \r\n      const target = event.target;\r\n      const value =  target.value;\r\n      const name = target.name;\r\n  \r\n      await this.setState({\r\n        [name]: value\r\n      });\r\n      console.log(name,value,this.state)  \r\n  }\r\n\r\n  \r\n\r\n\r\n\r\n    async onSubmit(event) {\r\n    const infos = this.state.firstName.concat(' ', this.state.lastName).concat(' né le ', this.state.birth)\r\n    this.setState({infos})\r\n    const contract = createContract(this.getDiplomaStorageAddress())\r\n    event.preventDefault();\r\n    const id = await this.getStudentId(this.state.INE,this.state.firstName,this.state.lastName,this.state.birth)\r\n    console.log('idf',id)\r\n    if (id > 0) {\r\n      this.setState({answer : \" Est inscrit dans la Blockchain Ethereum\"});\r\n    } else{\r\n      this.setState({answer : \" N'est pas inscrit\"});\r\n    }\r\n    console.log('answer',this.state.answer,this.state.student)\r\n\r\n    await this.getStudent(this.getDiplomaStorageAddress(),parseInt(id))\r\n\r\n\r\n    \r\n}\r\n\r\nrender() {\r\n  let ModalClose =() => this.setState({ModalShow:false})\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n          <NavBar/>\r\n      </div>\r\n\r\n      <div className=\"container\">\r\n        <div className=\"row mt-5 text-center center\">\r\n          <div className=\"col-lg-10 mb-4 grid-margin\">\r\n            <div className=\"card h-100\">\r\n                <h4 className=\"card-header\">Check Student</h4>\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text\">Rentrez les informations de l'étudiant dont vous voulez vérifier l'existance:  </p>\r\n                </div>\r\n            </div>\r\n          </div>\r\n      </div>    \r\n    </div>\r\n\r\n\r\n      <Form>\r\n          <Form.Group controlId=\"formGroupEmail\">\r\n              <Form.Label>INE number</Form.Label>\r\n              <Form.Control \r\n                  placeholder= 'Enter the INE number'\r\n                  name=\"INE\"\r\n                  type=\"number\"\r\n                  onChange={this.onChange} />\r\n          </Form.Group>\r\n          \r\n          <Form.Group controlId=\"formGroupPassword\">\r\n              <Form.Label>First Name</Form.Label>\r\n              <Form.Control \r\n                  placeholder='Enter the First Name'\r\n                  name=\"firstName\"\r\n                  type=\"text\"\r\n                  onChange={this.onChange} />\r\n          </Form.Group>\r\n\r\n          <Form.Group controlId=\"formGroupPassword\">\r\n              <Form.Label>Last Name</Form.Label>\r\n              <Form.Control \r\n                  placeholder= 'Enter the Last Name'\r\n                  name=\"lastName\"\r\n                  type=\"text\"\r\n                  onChange={this.onChange} />\r\n          </Form.Group>\r\n\r\n          <Form.Group controlId=\"formGroupPassword\">\r\n              <Form.Label>Birthday</Form.Label>\r\n              <Form.Control \r\n                  placeholder= 'Enter the Birthday'\r\n                  name=\"birth\"\r\n                  type=\"number\"\r\n                  onChange={this.onChange} />\r\n          </Form.Group>\r\n      </Form>\r\n    \r\n      <div>\r\n      \r\n    <ButtonToolbar>\r\n      <Button variant=\"primary\" \r\n        onClick={() => this.setState({ModalShow: true})}\r\n        >Check Student\r\n      </Button>\r\n      <PopupCheckStudent\r\n          show={this.state.ModalShow}\r\n          onHide={ModalClose}\r\n          onSubmit={this.onSubmit}\r\n          answer={this.state.answer}\r\n          firstName = {this.state.infos}\r\n          \r\n        />\r\n\r\n    </ButtonToolbar> \r\n\r\n      </div>\r\n\r\n      \r\n\r\n\r\n      <div className=\"container\">\r\n        <div className=\"row mt-5\">\r\n          <div className=\"col-lg-4 mb-4 grid-margin\">\r\n        <ButtonGroup size=\"lg\" >\r\n              <Button variant=\"primary\" \r\n                  onClick={this.onSubmitBack}\r\n                  >Back\r\n              </Button>\r\n              <Button variant=\"light\" \r\n                  onClick={this.onSubmitReload}\r\n                  >Refresh\r\n              </Button>\r\n        </ButtonGroup>\r\n      </div>\r\n    </div>\r\n  </div> \r\n    </div>\r\n  );\r\n}\r\n \r\n\r\nonSubmitBack(event) {\r\n  event.preventDefault();\r\n  window.history.back()\r\n  }\r\n\r\nonSubmitReload(event) {\r\n  event.preventDefault();\r\n  window.location.reload()\r\n  }\r\n\r\n}\r\n\r\nexport default CheckStudents;\r\n"]},"metadata":{},"sourceType":"module"}