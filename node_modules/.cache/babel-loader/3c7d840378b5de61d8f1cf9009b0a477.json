{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\francesca\\\\Desktop\\\\Code SmartContract\\\\react-boost-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{createContract}from\"./../ethereum/DiplomaStorageContract\";import{ButtonGroup,Button}from\"react-bootstrap\";import{web3}from\"./../ethereum/web3\";import NavBar from\"./../assets/NavBar\";export var RenderDegrees=/*#__PURE__*/function(_Component){_inherits(RenderDegrees,_Component);var _super=_createSuper(RenderDegrees);_createClass(RenderDegrees,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.getDegrees(this.getDiplomaStorageAddress());case 2:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"getDiplomaStorageAddress\",value:function getDiplomaStorageAddress(){return this.props.match.params.address;}},{key:\"getDegrees\",value:function(){var _getDegrees=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(address){var contract,accounts,degreeCount,i,degree;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:contract=createContract(address);_context2.next=3;return web3.eth.getAccounts();case 3:accounts=_context2.sent;this.setState({account:accounts[0]});console.log(accounts);this.setState({contract:contract});console.log(contract);_context2.next=10;return contract.methods.degreeCount().call();case 10:degreeCount=_context2.sent;this.setState({degreeCount:degreeCount});i=1;case 13:if(!(i<=degreeCount)){_context2.next=21;break;}_context2.next=16;return contract.methods.degrees(i).call();case 16:degree=_context2.sent;this.setState({degrees:[].concat(_toConsumableArray(this.state.degrees),[degree])});case 18:i++;_context2.next=13;break;case 21:case\"end\":return _context2.stop();}}},_callee2,this);}));function getDegrees(_x){return _getDegrees.apply(this,arguments);}return getDegrees;}()}]);function RenderDegrees(props){var _this;_classCallCheck(this,RenderDegrees);_this=_super.call(this,props);_this.state={students:{id:0,name:'N/A',schoolName:'N/A',year:0,idSchool:0}};_this.state={account:\"\",degreeCount:0,degrees:[]};return _this;}_createClass(RenderDegrees,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(NavBar,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5 text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-10 mb-4 grid-margin\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card h-100\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-header\"},\"All the degrees are here below\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},\"Voici la liste des degrees enregistr\\xE9s sur la blockchain.\",\" \")))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"#\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Name\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"School Name\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Year\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"idSchool\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},this.state.degrees.map(function(degree,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,degree.id));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.degrees.map(function(degree,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,degree.name));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.degrees.map(function(degree,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,degree.schoolName));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.degrees.map(function(degree,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,degree.year));})),/*#__PURE__*/React.createElement(\"td\",null,this.state.degrees.map(function(degree,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,degree.idSchool));}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(ButtonGroup,{size:\"lg\"},/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:this.onSubmitBack},\"Back\"),/*#__PURE__*/React.createElement(Button,{variant:\"light\",onClick:this.onSubmitReload},\"Refresh\")))));}},{key:\"onSubmitBack\",value:function onSubmitBack(event){event.preventDefault();window.history.back();}},{key:\"onSubmitReload\",value:function onSubmitReload(event){event.preventDefault();window.location.reload();}}]);return RenderDegrees;}(Component);export default RenderDegrees;","map":{"version":3,"sources":["C:/Users/francesca/Desktop/Code SmartContract/react-boost-test/src/components/RenderDegrees.js"],"names":["React","Component","createContract","ButtonGroup","Button","web3","NavBar","RenderDegrees","getDegrees","getDiplomaStorageAddress","props","match","params","address","contract","eth","getAccounts","accounts","setState","account","console","log","methods","degreeCount","call","i","degrees","degree","state","students","id","name","schoolName","year","idSchool","map","key","onSubmitBack","onSubmitReload","event","preventDefault","window","history","back","location","reload"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { createContract } from \"./../ethereum/DiplomaStorageContract\";\r\nimport { ButtonGroup, Button } from \"react-bootstrap\";\r\nimport { web3 } from \"./../ethereum/web3\";\r\nimport NavBar from \"./../assets/NavBar\";\r\n\r\nexport class RenderDegrees extends Component {\r\n  state = {\r\n    students: {\r\n      id: 0,\r\n      name: 'N/A',\r\n      schoolName: 'N/A',\r\n      year: 0,\r\n      idSchool: 0\r\n    },\r\n  };\r\n\r\n  async componentDidMount() {\r\n    await this.getDegrees(this.getDiplomaStorageAddress());\r\n  }\r\n\r\n  getDiplomaStorageAddress() {\r\n    return this.props.match.params.address;\r\n  }\r\n\r\n  async getDegrees(address) {\r\n    const contract = createContract(address);\r\n    const accounts = await web3.eth.getAccounts();\r\n    this.setState({ account: accounts[0] });\r\n    console.log(accounts);\r\n\r\n    this.setState({ contract });\r\n    console.log(contract);\r\n\r\n    const degreeCount = await contract.methods.degreeCount().call();\r\n    this.setState({ degreeCount });\r\n\r\n    for (var i = 1; i <= degreeCount; i++) {\r\n      const degree = await contract.methods.degrees(i).call();\r\n      this.setState({\r\n        degrees: [...this.state.degrees, degree],\r\n      });\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      account: \"\",\r\n      degreeCount: 0,\r\n      degrees: [],\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <header>\r\n          <NavBar />\r\n        </header>\r\n\r\n        <div className=\"container\">\r\n          <div className=\"row mt-5 text-center\">\r\n            <div className=\"col-lg-10 mb-4 grid-margin\">\r\n              <div className=\"card h-100\">\r\n                <h4 className=\"card-header\">All the degrees are here below</h4>\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text\">\r\n                    Voici la liste des degrees enregistrés sur la blockchain.{\" \"}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <table className=\"table\">\r\n            <thead className=\"thead-dark\">\r\n              <tr>\r\n                <th scope=\"col\">#</th>\r\n                <th scope=\"col\">Name</th>\r\n                <th scope=\"col\">School Name</th>\r\n                <th scope=\"col\">Year</th>\r\n                <th scope=\"col\">idSchool</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <th scope=\"row\">\r\n                  {this.state.degrees.map((degree, key) => {\r\n                    return (\r\n                      <div key={key}>\r\n                        <td>{degree.id}</td>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </th>\r\n\r\n                <td>\r\n                  {this.state.degrees.map((degree, key) => {\r\n                    return (\r\n                      <div key={key}>\r\n                        <td>{degree.name}</td>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </td>\r\n\r\n                <td>\r\n                  {this.state.degrees.map((degree, key) => {\r\n                    return (\r\n                      <div key={key}>\r\n                        <td>{degree.schoolName}</td>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </td>\r\n\r\n                <td>\r\n                  {this.state.degrees.map((degree, key) => {\r\n                    return (\r\n                      <div key={key}>\r\n                        <td>{degree.year}</td>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </td>\r\n\r\n                <td>\r\n                  {this.state.degrees.map((degree, key) => {\r\n                    return (\r\n                      <div key={key}>\r\n                        <td>{degree.idSchool}</td>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          <div className=\"container\">\r\n            <ButtonGroup size=\"lg\">\r\n              <Button variant=\"primary\" onClick={this.onSubmitBack}>\r\n                Back\r\n              </Button>\r\n              <Button variant=\"light\" onClick={this.onSubmitReload}>\r\n                Refresh\r\n              </Button>\r\n            </ButtonGroup>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onSubmitBack(event) {\r\n    event.preventDefault();\r\n    window.history.back();\r\n  }\r\n\r\n  onSubmitReload(event) {\r\n    event.preventDefault();\r\n    window.location.reload();\r\n  }\r\n}\r\n\r\nexport default RenderDegrees;\r\n"]},"metadata":{},"sourceType":"module"}