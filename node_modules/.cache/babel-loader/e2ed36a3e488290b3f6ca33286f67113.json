{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Documents/BC_Projects/OPPO-DS/src/components/CheckSchoolWithId.js\";\nimport React, { Component } from 'react';\nimport { createContract } from '../ethereum/DiplomaStorageContract';\nimport { Table } from 'semantic-ui-react';\nimport Web3 from 'web3';\nimport { web3 } from '../ethereum/web3';\nimport { Button, Header, Form } from 'semantic-ui-react';\nexport class CheckSchoolWithId extends Component {\n  async componentDidMount() {\n    this.loadBcData();\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    console.log(\"contrat\", contract);\n    this.getContractState(contract);\n    await this.getStudent(this.getDiplomaStorageAddress(), this.state.id);\n  }\n\n  async getContractState(contract) {\n    this.setState({\n      loading: true\n    });\n    const master = contract.methods.master().call();\n    console.log('master');\n    const studentCount = await contract.methods.studentCount().call();\n    this.setState({\n      studentCount: studentCount\n    });\n    console.log('studentCount GCS', studentCount);\n  }\n\n  async loadBcData() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    const network = await web3.eth.net.getNetworkType();\n    console.log(\"network\", network);\n    const accounts = await web3.eth.getAccounts();\n    console.log(\"account\", accounts[0]);\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(\"addresseContrat\", this.getDiplomaStorageAddress());\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    const studentCount = await this.state.contract.methods.studentCount().call();\n    this.setState({\n      studentCount: studentCount\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      schools: {\n        idSchool: 0,\n        name: 'N/A',\n        editor: 'N/A'\n      }\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      id: 0,\n      account: '',\n      schoolCount: 0,\n      schools: []\n    };\n  }\n\n  getDiplomaStorageAddress() {\n    return '0x64399f5759209029856F40854699f65e57ED4225';\n  }\n\n  async getSchool(address, id) {\n    const contract = createContract(address);\n    this.setState({\n      contract\n    });\n    console.log(contract);\n    const school = await contract.methods.schools(id).call();\n    console.log('school', school);\n    this.setState({\n      schools: [school]\n    });\n    console.log(\"schools\", this.state.schools);\n    const schoolCount = await contract.methods.schoolCount().call();\n    this.setState({\n      schoolCount\n    });\n  }\n\n  onChange(event) {\n    this.setState({\n      id: event.target.value\n    });\n  }\n\n  async onSubmit(event) {\n    event.preventDefault();\n    this.setState({\n      id: event.target.value\n    });\n    this.getSchool(this.getDiplomaStorageAddress(), parseInt(this.state.id));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      label: \"Id\",\n      type: \"number\",\n      value: this.state.address,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      onClick: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }, \"Submit\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, \"Account : \", this.state.account), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, \"Id : \", this.state.id, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, \"SchoolCount : \", this.state.schoolCount), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, \"Contract address: \", this.getDiplomaStorageAddress()), /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      padded: true,\n      color: \"yellow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, \"Value\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }, \"School\"), /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"taskList\",\n      className: \"list-unstyled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, this.state.schools.map((student, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"taskTemplate\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }\n      }, student.idSchool);\n    })))), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      ssigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"taskList\",\n      className: \"list-unstyled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }\n    }, this.state.schools.map((school, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"taskTemplate\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }, school.name);\n    })))), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }, \"Editor\"), /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"taskList\",\n      className: \"list-unstyled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }\n    }, this.state.schools.map((school, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"taskTemplate\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }\n      }, school.editor);\n    })))))));\n  }\n\n}\nexport default CheckSchoolWithId;","map":{"version":3,"sources":["/home/ubuntu/Documents/BC_Projects/OPPO-DS/src/components/CheckSchoolWithId.js"],"names":["React","Component","createContract","Table","Web3","web3","Button","Header","Form","CheckSchoolWithId","componentDidMount","loadBcData","contract","getDiplomaStorageAddress","setState","console","log","getContractState","getStudent","state","id","loading","master","methods","call","studentCount","givenProvider","network","eth","net","getNetworkType","accounts","getAccounts","account","constructor","props","schools","idSchool","name","editor","onChange","bind","onSubmit","schoolCount","getSchool","address","school","event","target","value","preventDefault","parseInt","render","map","student","key"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\nimport { createContract } from '../ethereum/DiplomaStorageContract'\nimport { Table } from 'semantic-ui-react'\nimport Web3 from 'web3'\nimport { web3 } from '../ethereum/web3'\nimport { Button, Header, Form} from 'semantic-ui-react';\n\n\n\n\nexport class CheckSchoolWithId extends Component {\n\n\n    state = {\n        schools: {\n            idSchool: 0,\n            name: 'N/A',\n            editor: 'N/A',\n        }\n\n    }\n\n  async componentDidMount () {\n    this.loadBcData()\n    const contract = createContract(this.getDiplomaStorageAddress())\n    this.setState({contract})\n    console.log(\"contrat\",contract)\n    this.getContractState(contract)\n    await this.getStudent(this.getDiplomaStorageAddress(),this.state.id)\n  }\n\n\n  async getContractState(contract){\n    this.setState({loading:true})\n    const master = contract.methods.master().call()\n    console.log('master')\n    const studentCount = await contract.methods.studentCount().call()\n    this.setState({studentCount: studentCount})\n    console.log('studentCount GCS',studentCount)\n  }\n\n  async loadBcData(){\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\")\n    const network = await web3.eth.net.getNetworkType()\n    console.log(\"network\",network)\n    const accounts = await web3.eth.getAccounts()\n    console.log(\"account\", accounts[0])\n    this.setState({account: accounts[0]})\n    console.log(\"addresseContrat\",this.getDiplomaStorageAddress())\n\n    const contract = createContract(this.getDiplomaStorageAddress())\n    this.setState({contract})\n    const studentCount = await this.state.contract.methods.studentCount().call()\n    this.setState({studentCount: studentCount})\n  }\n \n  constructor(props) {\n    super(props)\n    this.onChange = this.onChange.bind(this);\n      this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      id : 0,\n      account: '',\n      schoolCount: 0,\n      schools: [],\n\n      \n    }\n  }\n  \n  \n  getDiplomaStorageAddress () {\n    return '0x64399f5759209029856F40854699f65e57ED4225'\n  }\n\n  async getSchool(address,id) {\n    const contract = createContract(address)\n    \n    this.setState({ contract })\n    console.log(contract)\n\n    const school = await contract.methods.schools(id).call()\n    console.log('school',school)\n    this.setState({\n        schools: [school]\n    })\n    console.log(\"schools\", this.state.schools)\n\n    const schoolCount = await contract.methods.schoolCount().call()\n    this.setState({schoolCount})\n  }\n\n  \n\n\n\n  onChange(event) {\n    this.setState({id: event.target.value});\n}\n\n    async onSubmit(event) {\n    event.preventDefault();\n    this.setState({id: event.target.value});\n    this.getSchool(this.getDiplomaStorageAddress(),parseInt(this.state.id))\n\n    \n}\n\n  render() {\n    return (\n\n      \n      \n        <div>\n\n                  <Form>\n                    <Form.Input\n                        label='Id'\n                        type='number'\n                        value={this.state.address}\n                        onChange={this.onChange}\n                    />\n                    <Button\n                        type='submit'\n                        onClick={this.onSubmit}\n                    >\n                        Submit\n                    </Button>\n                </Form>\n\n\n          <p>Account : {this.state.account}</p>\n\n          <p>Id : {this.state.id} </p>\n\n          <p>SchoolCount : {this.state.schoolCount}</p>\n\n          <p>Contract address: {this.getDiplomaStorageAddress()}</p>\n\n            <Table celled padded color =\"yellow\">\n                <Table.Header>\n                    <Table.Row>\n                        <Table.HeaderCell>Name</Table.HeaderCell>\n                        <Table.HeaderCell>Value</Table.HeaderCell>\n                    </Table.Row>\n                </Table.Header>\n  \n                <Table.Body>\n  \n                    <Table.Row>\n                    <Table.Cell sigleline=\"true\"> \n                       School\n                    </Table.Cell>\n                    <Table.Cell sigleline=\"true\">\n              \n                <ul id=\"taskList\" className=\"list-unstyled\">\n                  { this.state.schools.map((student, key) => {\n              return(\n                <div className=\"taskTemplate\"  key={key}>\n                  \n                    \n                  {student.idSchool}\n                  \n                \n                </div>\n              )\n            })}\n          </ul>\n                   \n  \n  \n                    </Table.Cell>\n                    </Table.Row>\n  \n                    <Table.Row>\n                    <Table.Cell ssigleline=\"true\"> \n                       Name\n                    </Table.Cell>\n                    <Table.Cell sigleline=\"true\">\n  \n  \n                    <ul id=\"taskList\" className=\"list-unstyled\">\n                  { this.state.schools.map((school, key) => {\n              return(\n                <div className=\"taskTemplate\"  key={key}>\n                  \n                    \n                  {school.name}\n                 \n                \n                </div>\n              )\n            })}\n          </ul>\n  \n  \n                    </Table.Cell>\n                    </Table.Row>\n  \n                    <Table.Row>\n                    <Table.Cell sigleline=\"true\"> \n                       Editor\n                    </Table.Cell>\n                    <Table.Cell sigleline=\"true\">\n  \n  \n                    <ul id=\"taskList\" className=\"list-unstyled\">\n                  { this.state.schools.map((school, key) => {\n              return(\n                <div className=\"taskTemplate\"  key={key}>\n                  \n                    \n                  {school.editor}\n                 \n                \n                </div>\n              )\n            })}\n            </ul>\n\n  \n  \n  \n                    </Table.Cell>\n                    </Table.Row>\n  \n  \n                </Table.Body>\n            </Table>\n          \n        </div>\n    );\n  }\n}\n\nexport default CheckSchoolWithId;"]},"metadata":{},"sourceType":"module"}