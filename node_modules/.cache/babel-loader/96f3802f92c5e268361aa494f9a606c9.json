{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Documents/BC_Projects/OPPO-DS/src/components/CreateStudent.js\";\nimport React, { Component } from 'react';\nimport { createContract } from './../ethereum/DiplomaStorageContract';\nimport { Table } from 'semantic-ui-react';\nimport Web3 from 'web3';\nimport { web3 } from '../ethereum/web3';\nexport class CreateStudent extends Component {\n  async componentDidMount() {\n    this.loadBcData();\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    console.log(\"contrat\", contract);\n    this.getContractState(contract); //this.createStudent(16, 'Pierre', 'lastName', 28041999)\n  }\n\n  async getContractState(contract) {\n    this.setState({\n      loading: true\n    });\n    const master = contract.methods.master().call();\n    console.log('master');\n    const studentCount = await contract.methods.studentCount().call();\n    this.setState({\n      studentCount: studentCount\n    });\n    console.log('studentCount GCS', studentCount);\n  }\n\n  async loadBcData() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    const network = await web3.eth.net.getNetworkType();\n    console.log(\"network\", network);\n    const accounts = await web3.eth.getAccounts();\n    console.log(\"account\", accounts[0]);\n    this.setState({\n      account: accounts[0]\n    });\n    console.log(\"addresseContrat\", this.getDiplomaStorageAddress());\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    const studentCount = await this.state.contract.methods.studentCount().call();\n    this.setState({\n      studentCount: studentCount\n    });\n    console.log('stuentCount LBD', studentCount);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      students: {\n        name: 'N/A',\n        idStudent: 0,\n        INE: 0,\n        fisrtName: 'N/A',\n        lastName: 'N/A',\n        birth: 0\n      }\n    };\n    this.state = {\n      account: '',\n      studentCount: 0,\n      students: []\n    };\n  }\n\n  getDiplomaStorageAddress() {\n    return this.props.match.params.address;\n  }\n\n  async getStudents(address) {\n    /*const contract = createContract('0x798E41bBadA350Fb878EBDef9A3055cE4d9d2c23')\n    this.setState({ contract })\n    console.log(this.getDiplomaStorageAddress)\n    console.log(contract)\n     const student = await contract.methods.students(1).call().then(console.log)\n    this.setState({student}) \n      const idStudent =  contract.methods.students(1).call()\n    this.setState({idStudent})\n    const INE = await contract.methods.students(1).call()\n    this.setState({INE})\n    const firstName = await contract.methods.students(1).call()\n    this.setState({firstName})\n    const lastName = await contract.methods.students(1).call()\n    this.setState({lastName})\n    const birth = await contract.methods.students(1).call()\n    this.setState({birth})\n    */\n\n    /* const studentCount = await contract.methods.studentCount().call()\n    this.setState({studentCount}) */\n\n    /* for (var i = 1; i<=studentCount; i++) {\n        const student = await contract.methods.students(i).call().then(console.log)\n        this.setState({student})\n         const idStudent = await contract.methods.idStudent(0).call()\n        this.setState({idStudent})\n        const INE = await contract.methods.student(1).call()\n        const firstName = await contract.methods.student(2).call()\n        const lastName = await contract.methods.student(3).call()\n        const birth = await contract.methods.student(4).call()\n    this.setState({\n        students:[...this.state.students, student]\n    }) */\n    return {\n      idStudent: 0,\n      INE: 0,\n      firstName: \"e\",\n      lastName: \"l\",\n      birth: 28041999\n    };\n  }\n\n  async createStudent(INE, firstName, lastName, birth) {\n    this.setState({\n      loading: true\n    });\n    const contract = createContract(this.getDiplomaStorageAddress());\n    this.setState({\n      contract\n    });\n    contract.methods.createStudent(INE, firstName, lastName, birth).send({\n      from: '0xfd9e5D7BbB1871453b772B310632245ba9bf37F8'\n    });\n    const studentCount = await contract.methods.studentCount(); //this.setState({studentCount: studentCount})\n\n    console.log(\"studentCount2\", studentCount);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, \"Account : \", this.state.account), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, \"StudentCount : \", this.state.studentCount), /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      padded: true,\n      color: \"yellow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }, \"Value\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    }, \"Student\"), /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"taskList\",\n      className: \"list-unstyled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }, this.state.students.map((student, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"taskTemplate\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }\n      }, student.idStudent);\n    })))), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      ssigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, \"INE\"), /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"taskList\",\n      className: \"list-unstyled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, this.state.students.map((student, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"taskTemplate\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }\n      }, student.INE);\n    })))), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"taskList\",\n      className: \"list-unstyled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 21\n      }\n    }, this.state.students.map((student, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"taskTemplate\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }\n      }, student.firstName);\n    })))), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 21\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"taskList\",\n      className: \"list-unstyled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, this.state.students.map((student, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"taskTemplate\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }\n      }, student.lastName);\n    })))), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }\n    }, \"Birthday\"), /*#__PURE__*/React.createElement(Table.Cell, {\n      sigleline: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"taskList\",\n      className: \"list-unstyled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 21\n      }\n    }, this.state.students.map((student, key) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"taskTemplate\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 17\n        }\n      }, student.birth);\n    })))))));\n  }\n\n}\nexport default CreateStudent;","map":{"version":3,"sources":["/home/ubuntu/Documents/BC_Projects/OPPO-DS/src/components/CreateStudent.js"],"names":["React","Component","createContract","Table","Web3","web3","CreateStudent","componentDidMount","loadBcData","contract","getDiplomaStorageAddress","setState","console","log","getContractState","loading","master","methods","call","studentCount","givenProvider","network","eth","net","getNetworkType","accounts","getAccounts","account","state","constructor","props","students","name","idStudent","INE","fisrtName","lastName","birth","match","params","address","getStudents","firstName","createStudent","send","from","render","map","student","key"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react'\nimport { createContract } from './../ethereum/DiplomaStorageContract'\nimport { Table } from 'semantic-ui-react'\nimport Web3 from 'web3'\nimport { web3 } from '../ethereum/web3'\n\n\n\nexport class CreateStudent extends Component {\n\n    state = {\n        students: {\n            name:'N/A',\n            idStudent: 0,\n            INE: 0,\n            fisrtName: 'N/A',\n            lastName: 'N/A',\n            birth: 0,\n        }\n\n    }\n\n  async componentDidMount () {\n    this.loadBcData()\n    const contract = createContract(this.getDiplomaStorageAddress())\n    this.setState({contract})\n    console.log(\"contrat\",contract)\n    this.getContractState(contract)\n    //this.createStudent(16, 'Pierre', 'lastName', 28041999)\n  }\n\n  async getContractState(contract){\n    this.setState({loading:true})\n    const master = contract.methods.master().call()\n    console.log('master')\n    const studentCount = await contract.methods.studentCount().call()\n    this.setState({studentCount: studentCount})\n    console.log('studentCount GCS',studentCount)\n  }\n\n  async loadBcData(){\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\")\n    const network = await web3.eth.net.getNetworkType()\n    console.log(\"network\",network)\n    const accounts = await web3.eth.getAccounts()\n    console.log(\"account\", accounts[0])\n    this.setState({account: accounts[0]})\n    console.log(\"addresseContrat\",this.getDiplomaStorageAddress())\n\n    const contract = createContract(this.getDiplomaStorageAddress())\n    this.setState({contract})\n    const studentCount = await this.state.contract.methods.studentCount().call()\n    this.setState({studentCount: studentCount})\n    console.log('stuentCount LBD',studentCount)\n  }\n \n  constructor(props) {\n    super(props)\n    this.state = {\n      account: '',\n      studentCount: 0,\n      students: [],\n    }\n  }\n  \n  \n  getDiplomaStorageAddress () {\n    return this.props.match.params.address\n  }\n\n  async getStudents(address) {\n    /*const contract = createContract('0x798E41bBadA350Fb878EBDef9A3055cE4d9d2c23')\n    this.setState({ contract })\n    console.log(this.getDiplomaStorageAddress)\n    console.log(contract)\n\n    const student = await contract.methods.students(1).call().then(console.log)\n    this.setState({student}) \n \n    const idStudent =  contract.methods.students(1).call()\n    this.setState({idStudent})\n    const INE = await contract.methods.students(1).call()\n    this.setState({INE})\n    const firstName = await contract.methods.students(1).call()\n    this.setState({firstName})\n    const lastName = await contract.methods.students(1).call()\n    this.setState({lastName})\n    const birth = await contract.methods.students(1).call()\n    this.setState({birth})\n    */\n    \n    /* const studentCount = await contract.methods.studentCount().call()\n    this.setState({studentCount}) */\n\n    /* for (var i = 1; i<=studentCount; i++) {\n        const student = await contract.methods.students(i).call().then(console.log)\n        this.setState({student})\n\n        const idStudent = await contract.methods.idStudent(0).call()\n        this.setState({idStudent})\n        const INE = await contract.methods.student(1).call()\n        const firstName = await contract.methods.student(2).call()\n        const lastName = await contract.methods.student(3).call()\n        const birth = await contract.methods.student(4).call()\n    this.setState({\n        students:[...this.state.students, student]\n    }) */\n    return {\n        idStudent: 0,\n        INE: 0,\n        firstName: \"e\",\n        lastName: \"l\",\n        birth: 28041999,\n    }\n};\n  \n\n\n   async createStudent(INE, firstName, lastName, birth) {\n    this.setState({loading:true})\n    const contract = createContract(this.getDiplomaStorageAddress())\n    this.setState({contract})\n    contract.methods.createStudent(INE,firstName,lastName,birth).send({ from: '0xfd9e5D7BbB1871453b772B310632245ba9bf37F8' })\n    const studentCount = await contract.methods.studentCount()\n    //this.setState({studentCount: studentCount})\n    console.log(\"studentCount2\",studentCount)\n  } \n\n  render() {\n    return (\n      \n      \n        <div>\n          <p>Account : {this.state.account}</p>\n\n          <p>StudentCount : {this.state.studentCount}</p>\n\n            <Table celled padded color =\"yellow\">\n                <Table.Header>\n                    <Table.Row>\n                        <Table.HeaderCell>Name</Table.HeaderCell>\n                        <Table.HeaderCell>Value</Table.HeaderCell>\n                    </Table.Row>\n                </Table.Header>\n  \n                <Table.Body>\n  \n                    <Table.Row>\n                    <Table.Cell sigleline=\"true\"> \n                       Student\n                    </Table.Cell>\n                    <Table.Cell sigleline=\"true\">\n              \n                <ul id=\"taskList\" className=\"list-unstyled\">\n                  { this.state.students.map((student, key) => {\n              return(\n                <div className=\"taskTemplate\"  key={key}>\n                  \n                    \n                  {student.idStudent}\n                  \n                \n                </div>\n              )\n            })}\n          </ul>\n                   \n  \n  \n                    </Table.Cell>\n                    </Table.Row>\n  \n                    <Table.Row>\n                    <Table.Cell ssigleline=\"true\"> \n                       INE\n                    </Table.Cell>\n                    <Table.Cell sigleline=\"true\">\n  \n  \n                    <ul id=\"taskList\" className=\"list-unstyled\">\n                  { this.state.students.map((student, key) => {\n              return(\n                <div className=\"taskTemplate\"  key={key}>\n                  \n                    \n                  {student.INE}\n                 \n                \n                </div>\n              )\n            })}\n          </ul>\n  \n  \n                    </Table.Cell>\n                    </Table.Row>\n  \n                    <Table.Row>\n                    <Table.Cell sigleline=\"true\"> \n                       First Name \n                    </Table.Cell>\n                    <Table.Cell sigleline=\"true\">\n  \n  \n                    <ul id=\"taskList\" className=\"list-unstyled\">\n                  { this.state.students.map((student, key) => {\n              return(\n                <div className=\"taskTemplate\"  key={key}>\n                  \n                    \n                  {student.firstName}\n                 \n                \n                </div>\n              )\n            })}\n          </ul>\n  \n                    </Table.Cell>\n                    </Table.Row>\n  \n                    <Table.Row>\n                    <Table.Cell sigleline=\"true\"> \n                       Last Name\n                    </Table.Cell>\n                    <Table.Cell sigleline=\"true\">\n  \n  \n                    <ul id=\"taskList\" className=\"list-unstyled\">\n                  { this.state.students.map((student, key) => {\n              return(\n                <div className=\"taskTemplate\"  key={key}>\n                  \n                    \n                  {student.lastName}\n                 \n                \n                </div>\n              )\n            })}\n          </ul>\n  \n  \n                    </Table.Cell>\n                    </Table.Row>\n  \n                    <Table.Row>\n                    <Table.Cell sigleline=\"true\"> \n                       Birthday\n                    </Table.Cell>\n                    <Table.Cell sigleline=\"true\">\n  \n  \n                    <ul id=\"taskList\" className=\"list-unstyled\">\n                  { this.state.students.map((student, key) => {\n              return(\n                <div className=\"taskTemplate\"  key={key}>\n                  \n                    \n                  {student.birth}\n                 \n                \n                </div>\n              )\n            })}\n          </ul>\n  \n  \n                    </Table.Cell>\n                    </Table.Row>\n  \n  \n                </Table.Body>\n            </Table>\n          \n        </div>\n    );\n  }\n}\n\nexport default CreateStudent;"]},"metadata":{},"sourceType":"module"}